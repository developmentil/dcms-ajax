/** @license
 * DCMS-Ajax <http://www.dcms.co.il/>
 * Copyright (C) Development IL - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * @Author Moshe Simantov
 * @Version 1.1.2
 */

!function(t){"function"==typeof define&&define.amd?define("core/libs/sammy",["jquery"],t):$.sammy=window.Sammy=t($)}(function(t){var e,n="([^/]+)",i=/:([\w\d]+)/g,r=/\?([^#]*)?$/,o=function(t){return Array.prototype.slice.call(t)},s=function(t){return"[object Function]"===Object.prototype.toString.call(t)},a=function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},u=function(t){return decodeURIComponent((t||"").replace(/\+/g," "))},c=encodeURIComponent,p=function(t){return String(t).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},d=function(t){return function(){return this.route.apply(this,[t].concat(Array.prototype.slice.call(arguments)))}},h={},f=!(!window.history||!history.pushState),g=[];return e=function(){var n,i,r=o(arguments);return e.apps=e.apps||{},0===r.length||r[0]&&s(r[0])?e.apply(e,["body"].concat(r)):"string"==typeof(i=r.shift())?(n=e.apps[i]||new e.Application,n.element_selector=i,r.length>0&&t.each(r,function(t,e){n.use(e)}),n.element_selector!=i&&delete e.apps[i],e.apps[n.element_selector]=n,n):void 0},e.VERSION="0.7.4",e.addLogger=function(t){g.push(t)},e.log=function(){var n=o(arguments);n.unshift("["+Date()+"]"),t.each(g,function(t,i){i.apply(e,n)})},"undefined"!=typeof window.console?e.addLogger(s(window.console.log.apply)?function(){window.console.log.apply(window.console,arguments)}:function(){window.console.log(arguments)}):"undefined"!=typeof console&&e.addLogger(function(){console.log.apply(console,arguments)}),t.extend(e,{makeArray:o,isFunction:s,isArray:a}),e.Object=function(e){return t.extend(this,e||{})},t.extend(e.Object.prototype,{escapeHTML:p,h:p,toHash:function(){var e={};return t.each(this,function(t,n){s(n)||(e[t]=n)}),e},toHTML:function(){var e="";return t.each(this,function(t,n){s(n)||(e+="<strong>"+t+"</strong> "+n+"<br />")}),e},keys:function(t){var e=[];for(var n in this)s(this[n])&&t||e.push(n);return e},has:function(e){return this[e]&&""!==t.trim(this[e].toString())},join:function(){var t=o(arguments),e=t.shift();return t.join(e)},log:function(){e.log.apply(e,arguments)},toString:function(e){var n=[];return t.each(this,function(t,i){(!s(i)||e)&&n.push('"'+t+'": '+i.toString())}),"Sammy.Object: {"+n.join(",")+"}"}}),e.targetIsThisWindow=function(e){var n=t(e.target).attr("target");return n&&n!==window.name&&"_self"!==n?"_blank"===n?!1:"top"===n&&window===window.top?!0:!1:!0},e.DefaultLocationProxy=function(t,e){this.app=t,this.is_native=!1,this.has_history=f,this._startPolling(e)},e.DefaultLocationProxy.fullPath=function(t){var e=t.toString().match(/^[^#]*(#.+)$/),n=e?e[1]:"";return[t.pathname,t.search,n].join("")},t.extend(e.DefaultLocationProxy.prototype,{bind:function(){var n=this,i=this.app,r=e.DefaultLocationProxy;t(window).bind("hashchange."+this.app.eventNamespace(),function(t,e){n.is_native!==!1||e||(n.is_native=!0,window.clearInterval(r._interval),r._interval=null),i.trigger("location-changed")}),f&&!i.disable_push_state&&(t(window).bind("popstate."+this.app.eventNamespace(),function(){i.trigger("location-changed")}),t(document).delegate("a","click.history-"+this.app.eventNamespace(),function(t){if(!(t.isDefaultPrevented()||t.metaKey||t.ctrlKey)){var o=r.fullPath(this),s=this.hostname?this.hostname:function(t){var e=document.createElement("a");return e.href=t.href,e.hostname}(this);return s==window.location.hostname&&i.lookupRoute("get",o)&&e.targetIsThisWindow(t)?(t.preventDefault(),n.setLocation(o),!1):void 0}})),r._bindings||(r._bindings=0),r._bindings++},unbind:function(){t(window).unbind("hashchange."+this.app.eventNamespace()),t(window).unbind("popstate."+this.app.eventNamespace()),t(document).undelegate("a","click.history-"+this.app.eventNamespace()),e.DefaultLocationProxy._bindings--,e.DefaultLocationProxy._bindings<=0&&(window.clearInterval(e.DefaultLocationProxy._interval),e.DefaultLocationProxy._interval=null)},getLocation:function(){return e.DefaultLocationProxy.fullPath(window.location)},setLocation:function(t){if(/^([^#\/]|$)/.test(t)&&(t=f&&!this.app.disable_push_state?"/"+t:"#!/"+t),t!=this.getLocation()){if(!f||this.app.disable_push_state||!/^\//.test(t))return window.location=t;history.pushState({path:t},window.title,t),this.app.trigger("location-changed")}},_startPolling:function(n){var i=this;if(!e.DefaultLocationProxy._interval){n||(n=10);var r=function(){var n=i.getLocation();("undefined"==typeof e.DefaultLocationProxy._last_location||n!=e.DefaultLocationProxy._last_location)&&window.setTimeout(function(){t(window).trigger("hashchange",[!0])},0),e.DefaultLocationProxy._last_location=n};r(),e.DefaultLocationProxy._interval=window.setInterval(r,n)}}}),e.Application=function(t){var n=this;this.routes={},this.listeners=new e.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(1e3*Math.random(),10),this.context_prototype=function(){e.EventContext.apply(this,arguments)},this.context_prototype.prototype=new e.EventContext,s(t)&&t.apply(this,[this]),this._location_proxy||this.setLocationProxy(new e.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(t,e){n.log(n.toString(),t.cleaned_type,e||{})})},e.Application.prototype=t.extend({},e.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(e){return e?t(this.element_selector).find(e):t(this.element_selector)},use:function(){var t=o(arguments),n=t.shift(),i=n||"";try{t.unshift(this),"string"==typeof n&&(i="Sammy."+n,n=e[n]),n.apply(this,t)}catch(r){"undefined"==typeof n?this.error("Plugin Error: called use() but plugin ("+i.toString()+") is not defined",r):s(n)?this.error("Plugin Error",r):this.error("Plugin Error: called use() but '"+i.toString()+"' is not a function",r)}return this},setLocationProxy:function(t){var e=this._location_proxy;this._location_proxy=t,this.isRunning()&&(e&&e.unbind(),this._location_proxy.bind())},log:function(){e.log.apply(e,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(e,r){var o,a,l=this,u=[],c=Array.prototype.slice.call(arguments,2);if(0===c.length&&s(r)&&(r=e,c=[r],e="any"),e=e.toLowerCase(),r.constructor==String){for(i.lastIndex=0;null!==(a=i.exec(r));)u.push(a[1]);r=new RegExp(r.replace(i,n)+"$")}return t.each(c,function(t,e){"string"==typeof e&&(c[t]=l[e])}),o=function(t){var e={verb:t,path:r,callback:c,param_names:u};l.routes[t]=l.routes[t]||[],l.routes[t].push(e)},"any"===e?t.each(this.ROUTE_VERBS,function(t,e){o(e)}):o(e),this},get:d("get"),post:d("post"),put:d("put"),del:d("delete"),any:d("any"),mapRoutes:function(e){var n=this;return t.each(e,function(t,e){n.route.apply(n,e)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(t,e,n){var i=this;"undefined"==typeof n&&(n=e);var r=function(){var t,e,r;t=arguments[0],r=arguments[1],r&&r.context?(e=r.context,delete r.context):e=new i.context_prototype(i,"bind",t.type,r,t.target),t.cleaned_type=t.type.replace(i.eventNamespace(),""),n.apply(e,[t,r])};return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r),this.isRunning()&&this._listen(t,r),this},trigger:function(t,e){return this.$element().trigger([t,this.eventNamespace()].join("."),[e]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(t,e){return s(t)&&(e=t,t={}),this.befores.push([t,e]),this},after:function(t){return this.bind("event-context-after",t)},around:function(t){return this.arounds.push(t),this},onComplete:function(t){return this._onComplete=t,this},isRunning:function(){return this._running},helpers:function(e){return t.extend(this.context_prototype.prototype,e),this},helper:function(t,e){return this.context_prototype.prototype[t]=e,this},run:function(n){if(this.isRunning())return!1;var i=this;return t.each(this.listeners.toHash(),function(e,n){t.each(n,function(t,n){i._listen(e,n)})}),this.trigger("run",{start_url:n}),this._running=!0,this.last_location=null,/\#(.+)/.test(this.getLocation())||"undefined"==typeof n||this.setLocation(n),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){i._checkLocation()}),this.bind("submit",function(n){if(!e.targetIsThisWindow(n))return!0;var r=i._checkFormSubmission(t(n.target).closest("form"));return r===!1?n.preventDefault():!1}),t(window).bind("unload",function(){i.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var e=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(e.eventNamespace()),t.each(this.listeners.toHash(),function(n,i){t.each(i,function(t,i){e._unlisten(n,i)})}),this._running=!1,this},destroy:function(){return this.unload(),delete e.apps[this.element_selector],this},bindToAllEvents:function(e){var n=this;return t.each(this.APP_EVENTS,function(t,i){n.bind(i,e)}),t.each(this.listeners.keys(!0),function(i,r){-1==t.inArray(r,n.APP_EVENTS)&&n.bind(r,e)}),this},routablePath:function(t){return t.replace(r,"")},lookupRoute:function(t,e){var n,i,r=this,o=!1,s=0;if("undefined"!=typeof this.routes[t])for(n=this.routes[t].length;n>s;s++)if(i=this.routes[t][s],r.routablePath(e).match(i.path)){o=i;break}return o},runRoute:function(e,n,i,r){var o,s,a,l,c,p,d,h,f=this,g=this.lookupRoute(e,n);if(this.debug&&this.log("runRoute",[e,n].join(" ")),this.trigger("run-route",{verb:e,path:n,params:i}),"undefined"==typeof i&&(i={}),t.extend(i,this._parseQueryString(n)),g){this.trigger("route-found",{route:g}),null!==(d=g.path.exec(this.routablePath(n)))&&(d.shift(),t.each(d,function(t,e){g.param_names[t]?i[g.param_names[t]]=u(e):(i.splat||(i.splat=[]),i.splat.push(u(e)))})),o=new this.context_prototype(this,e,n,i,r),a=this.arounds.slice(0),l=this.befores.slice(0),p=[o],i.splat&&(p=p.concat(i.splat)),s=function(){for(var t,e,n;l.length>0;)if(c=l.shift(),f.contextMatchesOptions(o,c[0])&&(t=c[1].apply(o,[o]),t===!1))return!1;return f.last_route=g,o.trigger("event-context-before",{context:o}),"function"==typeof g.callback&&(g.callback=[g.callback]),g.callback&&g.callback.length&&(e=-1,n=function(){e++,g.callback[e]?t=g.callback[e].apply(o,p):f._onComplete&&f._onComplete(o)},p.push(n),n()),o.trigger("event-context-after",{context:o}),t},t.each(a.reverse(),function(t,e){var n=s;s=function(){return e.apply(o,[n])}});try{h=s()}catch(m){this.error(["500 Error",e,n].join(" "),m)}return h}return this.notFound(e,n)},contextMatchesOptions:function(e,n,i){var r=n;if(("string"==typeof r||l(r))&&(r={path:r}),"undefined"==typeof i&&(i=!0),t.isEmptyObject(r))return!0;if(a(r.path)){var o,s,u,c;for(o=[],s=0,c=r.path.length;c>s;s+=1)u=t.extend({},r,{path:r.path[s]}),o.push(this.contextMatchesOptions(e,u));var p=t.inArray(!0,o)>-1?!0:!1;return i?p:!p}if(r.only)return this.contextMatchesOptions(e,r.only,!0);if(r.except)return this.contextMatchesOptions(e,r.except,!1);var d=!0,h=!0;return r.path&&(l(r.path)||(r.path=new RegExp(r.path.toString()+"$")),d=r.path.test(e.path)),r.verb&&(h="string"==typeof r.verb?r.verb===e.verb:r.verb.indexOf(e.verb)>-1),i?h&&d:!(h&&d)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(t){return this._location_proxy.setLocation(t)},swap:function(t,e){var n=this.$element().html(t);return s(e)&&e(t),n},templateCache:function(t,e){return"undefined"!=typeof e?h[t]=e:h[t]},clearTemplateCache:function(){return h={}},notFound:function(t,e){var n=this.error(["404 Not Found",t,e].join(" "));return"get"===t?n:!0},error:function(t,e){if(e||(e=new Error),e.message=[t,e.message].join(" "),this.trigger("error",{message:e.message,error:e}),this.raise_errors)throw e;this.log(e.message,e)},_checkLocation:function(){var t,e;return t=this.getLocation(),this.last_location&&"get"==this.last_location[0]&&this.last_location[1]==t||(this.last_location=["get",t],e=this.runRoute("get",t)),e},_getFormVerb:function(e){var n,i,r=t(e);return i=r.find('input[name="_method"]'),i.length>0&&(n=i.val()),n||(n=r[0].getAttribute("method")),n&&""!==n||(n="get"),t.trim(n.toString().toLowerCase())},_checkFormSubmission:function(e){var n,i,r,o,s;return this.trigger("check-form-submission",{form:e}),n=t(e),i=n.attr("action")||"",r=this._getFormVerb(n),this.debug&&this.log("_checkFormSubmission",n,i,r),"get"===r?(o=this._serializeFormParams(n),""!==o&&(i+="?"+o),this.setLocation(i),s=!1):(o=t.extend({},this._parseFormParams(n)),s=this.runRoute(r,i,o,e.get(0))),"undefined"==typeof s?!1:s},_serializeFormParams:function(t){var e,n="",i=t.serializeArray();if(i.length>0)for(n=this._encodeFormPair(i[0].name,i[0].value),e=1;e<i.length;e++)n=n+"&"+this._encodeFormPair(i[e].name,i[e].value);return n},_encodeFormPair:function(t,e){return c(t)+"="+c(e)},_parseFormParams:function(t){var e,n={},i=t.serializeArray();for(e=0;e<i.length;e++)n=this._parseParamPair(n,i[e].name,i[e].value);return n},_parseQueryString:function(t){var e,n,i,o,s={};if(e=t.match(r),e&&e[1])for(n=e[1].split("&"),o=0;o<n.length;o++)i=n[o].split("="),s=this._parseParamPair(s,u(i[0]),u(i[1]||""));return s},_parseParamPair:function(t,e,n){return"undefined"!=typeof t[e]?a(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n,t},_listen:function(t,e){return this.$element().bind([t,this.eventNamespace()].join("."),e)},_unlisten:function(t,e){return this.$element().unbind([t,this.eventNamespace()].join("."),e)}}),e.RenderContext=function(t){this.event_context=t,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},e.RenderContext.prototype=t.extend({},e.Object.prototype,{then:function(t){if(!s(t)){if(!("string"==typeof t&&t in this.event_context))return this;var e=this.event_context[t];t=function(t){return e.apply(this.event_context,[t])}}var n=this;return this.waiting?this.callbacks.push(t):(this.wait(),window.setTimeout(function(){var e=t.apply(n,[n.content,n.previous_content]);e!==!1&&n.next(e)},0)),this},wait:function(){this.waiting=!0},next:function(t){this.waiting=!1,"undefined"!=typeof t&&(this.previous_content=this.content,this.content=t),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(e,n,i){var r=this;return this.then(function(){var o,a,l;return s(n)?(i=n,n={}):n=t.extend({},n),i&&this.then(i),"string"==typeof e?(l=e.match(/\.json$/)||n.json,o=l?n.cache===!0:n.cache!==!1,r.next_engine=r.event_context.engineFor(e),delete n.cache,delete n.json,n.engine&&(r.next_engine=n.engine,delete n.engine),o&&(a=this.event_context.app.templateCache(e))?a:(this.wait(),t.ajax(t.extend({url:e,data:{},dataType:l?"json":"text",type:"get",success:function(t){o&&r.event_context.app.templateCache(e,t),r.next(t)}},n)),!1)):e.nodeType?e.innerHTML:e.selector?(r.next_engine=e.attr("data-engine"),n.clone===!1?e.remove()[0].innerHTML.toString():e[0].innerHTML.toString()):void 0})},loadPartials:function(t){var e;if(t){this.partials=this.partials||{};for(e in t)!function(e,n){e.load(t[n]).then(function(t){this.partials[n]=t})}(this,e)}return this},render:function(t,e,n,i){return s(t)&&!e?this.then(t):(s(e)?(i=n,n=e,e=null):n&&!s(n)&&(i=n,n=null),this.loadPartials(i).load(t).interpolate(e,t).then(n))},partial:function(t,e,n,i){return s(n)?this.render(t,e,i).swap(n):s(e)?this.render(t,{},n).swap(e):this.render(t,e,n).swap()},send:function(){var t=this,e=o(arguments),n=e.shift();return a(e[0])&&(e=e[0]),this.then(function(){return e.push(function(e){t.next(e)}),t.wait(),n.apply(n,e),!1})},collect:function(e,n,i){var r=this,o=function(){s(e)&&(n=e,e=this.content);var i=[],o=!1;return t.each(e,function(t,e){var s=n.apply(r,[t,e]);return s.jquery&&1==s.length&&(s=s[0],o=!0),i.push(s),s}),o?i:i.join("")};return i?o():this.then(o)},renderEach:function(e,n,i,r){return a(n)&&(r=i,i=n,n=null),this.load(e).then(function(o){var s=this;return i||(i=a(this.previous_content)?this.previous_content:[]),r?void t.each(i,function(t,i){var a={},l=this.next_engine||e;n?a[n]=i:a=i,r(i,s.event_context.interpolate(o,a,l))}):this.collect(i,function(t,i){var r={},s=this.next_engine||e;return n?r[n]=i:r=i,this.event_context.interpolate(o,r,s)},!0)})},interpolate:function(t,e,n){var i=this;return this.then(function(r,o){!t&&o&&(t=o),this.next_engine&&(e=this.next_engine,this.next_engine=!1);var s=i.event_context.interpolate(r,t,e,this.partials);return n?o+s:s})},swap:function(t){return this.then(function(e){return this.event_context.swap(e,t),e}).trigger("changed",{})},appendTo:function(e){return this.then(function(n){t(e).append(n)}).trigger("changed",{})},prependTo:function(e){return this.then(function(n){t(e).prepend(n)}).trigger("changed",{})},replace:function(e){return this.then(function(n){t(e).html(n)}).trigger("changed",{})},trigger:function(t,e){return this.then(function(n){return"undefined"==typeof e&&(e={content:n}),this.event_context.trigger(t,e),n})}}),e.EventContext=function(t,n,i,r,o){this.app=t,this.verb=n,this.path=i,this.params=new e.Object(r),this.target=o},e.EventContext.prototype=t.extend({},e.Object.prototype,{$element:function(){return this.app.$element(o(arguments).shift())},engineFor:function(t){var e,n=this;return s(t)?t:(t=(t||n.app.template_engine).toString(),(e=t.match(/\.([^\.\?\#]+)$/))&&(t=e[1]),t&&s(n[t])?n[t]:n.app.template_engine?this.engineFor(n.app.template_engine):function(t){return t})},interpolate:function(t,e,n,i){return this.engineFor(n).apply(this,[t,e,i])},render:function(t,n,i,r){return new e.RenderContext(this).render(t,n,i,r)},renderEach:function(t,n,i,r){return new e.RenderContext(this).renderEach(t,n,i,r)},load:function(t,n,i){return new e.RenderContext(this).load(t,n,i)},loadPartials:function(t){return new e.RenderContext(this).loadPartials(t)},partial:function(t,n,i,r){return new e.RenderContext(this).partial(t,n,i,r)},send:function(){var t=new e.RenderContext(this);return t.send.apply(t,arguments)},redirect:function(){var e,n=o(arguments),i=this.app.getLocation(),r=n.length;if(r>1){for(var s=0,a=[],l=[],u={},c=!1;r>s;s++)"string"==typeof n[s]?a.push(n[s]):(t.extend(u,n[s]),c=!0);if(e=a.join("/"),c){for(var p in u)l.push(this.app._encodeFormPair(p,u[p]));e+="?"+l.join("&")}}else e=n[0];this.trigger("redirect",{to:e}),this.app.last_location=[this.verb,this.path],this.app.setLocation(e),new RegExp(e).test(i)&&this.app.trigger("location-changed")},trigger:function(t,e){return"undefined"==typeof e&&(e={}),e.context||(e.context=this),this.app.trigger(t,e)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(t,e){return this.app.swap(t,e)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(e){return t.parseJSON(e)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),e}),function(){function t(t,e,n,i,r,o){e[t]&&(n.push(t),(e[t]===!0||1===e[t])&&i.push(r+t+"/"+o))}function e(t,e,n,i,r){var o=i+e+"/"+r;require._fileExists(t.toUrl(o+".js"))&&n.push(o)}function n(t,e,i){var r;for(r in e)!e.hasOwnProperty(r)||t.hasOwnProperty(r)&&!i?"object"==typeof e[r]&&n(t[r],e[r],i):t[r]=e[r]}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(r){var o=r.config?r.config():{};return{version:"2.0.1+",load:function(r,s,a,l){l=l||{},l.locale&&(o.locale=l.locale);var u,c,p,d=i.exec(r),h=d[1],f=d[4],g=d[5],m=f.split("-"),y=[],v={},_="";if(d[5]?(h=d[1],u=h+g):(u=r,g=d[4],f=o.locale,f||(f=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),m=f.split("-")),l.isBuild){for(y.push(u),e(s,"root",y,h,g),c=0;c<m.length;c++)p=m[c],_+=(_?"-":"")+p,e(s,_,y,h,g);s(y,function(){a()})}else s([u],function(e){var i,r=[];for(t("root",e,r,y,h,g),c=0;c<m.length;c++)i=m[c],_+=(_?"-":"")+i,t(_,e,r,y,h,g);s(y,function(){var t,i,o;for(t=r.length-1;t>-1&&r[t];t--)o=r[t],i=e[o],(i===!0||1===i)&&(i=s(h+o+"/"+g)),n(v,i);a(v)})})}}})}(),define("core/nls/core",{root:{Locale:{locale:"en-US",direction:"ltr",name:"English",date:"mm/dd/yy",time:"HH:ii:ss"},Currency:{symbol:"$",code:"USD",name:"United States dollar"},Compat:{alert:'Your browser version is outdated and not suitable to work with this system.\nPlease consider installing more up to date browser such as "Firefox" or "Chrome".'}},"he-IL":!0}),define("core/nls/he-IL/core",{Locale:{locale:"he-IL",direction:"rtl",name:"עברית",date:"dd/mm/yy",time:"HH:ii:ss"},Currency:{symbol:"₪",code:"NIS",name:"שקל חדש"},Compat:{alert:'גרסת הדפדפן שלך מיושנת ואינה מתאימה לעבודה עם מערכת זו.\nאנא שקול התקנת דפדפן מעודכן יותר כגון "פיירפוקס" או "כרום".'}}),function(t){function e(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0}function n(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function i(){this._bindings=[],this._prevParams=null}e.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype={VERSION:"0.8.1",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,r){var o,s=this._indexOfListener(t,i);if(-1!==s){if(o=this._bindings[s],o.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,i){return n(t,"add"),this._registerListener(t,!1,e,i)},addOnce:function(t,e,i){return n(t,"addOnce"),this._registerListener(t,!0,e,i)},remove:function(t,e){n(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=e),n){t=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(t[n]&&this._shouldPropagate&&t[n].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var r=i;r.Signal=i,"function"==typeof define&&define.amd?define("core/libs/signals",[],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:t.signals=r}(this),define("core/SignalsEmitter",["core/libs/signals"],function(t){function e(){this._signals={}}function n(t,e){if(!this.active)return void e();var n,i=this._bindings.length;if(this.memorize&&(this._prevParams=t),!i)return void e();n=this._bindings.slice(),this._shouldPropagate=!0;var r=this,o=function(o){return o?void e(o):(i--,n[i]&&r._shouldPropagate&&n[i].execute(t)!==!1?void 0:void e())};t.push(o),o()}var i=e.prototype;return i.getSignal=function(e){return"undefined"==typeof this._signals[e]&&(this._signals[e]=new t.Signal),this._signals[e]},i.addListener=function(t,e,n){if("number"==typeof e){var i=n;n=e,e=i}var r=this.getSignal(t).add(e,null,n);return this.emit("newListener",t,e,n),r},i.on=i.addListener,i.when=i.addListener,i.once=function(t,e,n){if("number"==typeof e){var i=n;n=e,e=i}return this.getSignal(t).addOnce(e,null,n)},i.removeListener=function(t,e){return this.getSignal(t).remove(e,null),this.emit("removeListener",t,e),this},i.removeAllListeners=function(t){if("undefined"==typeof t)return this.getSignal(t).removeAll(),this;for(var e in this._signals)this._signals[e].removeAll();return this},i.emitEvent=function(t,e){var n=this.getSignal(t);return n.dispatch.apply(n,e),this},i.emit=function(t){return this.emitEvent(t,Array.prototype.slice.call(arguments,1))},i.trigger=function(t){var e=this.getSignal(t),i=Array.prototype.slice.call(arguments,1),r=i.pop();return n.call(e,i,r),this},e}),define("core/Registry",[],function(){function t(){this._data={}}var e=function(t,e){for(var n=e.split("."),i=null,r=null,o=0;o<n.length&&(r=t,i=n[o],"undefined"==typeof t[i]&&(t[i]={}),t=t[i],t);o++);return[t,r,i]};return t.prototype.get=function(t){var n=e(this._data,t)[0];return"object"==typeof n?Array.isArray(n)?n.slice():$.extend({},n):n},t.prototype.set=function(t,n){"undefined"==typeof n&&(n={});var i=e(this._data,t);return i[1][i[2]]=n,this},t.prototype.extend=function(t,n,i){"undefined"==typeof i&&(i=n,n=!1,"undefined"==typeof i&&(i={}));var r=e(this._data,t);return"undefined"==typeof r[1][r[2]]&&(r[1][r[2]]={}),$.extend(n||!1,r[1][r[2]],i),this},t.prototype.unset=function(t){var n=e(this._data,t);return delete n[1][n[2]],this},t.prototype.push=function(t,n,i){arguments.length<3&&(i=n,n=null);var r=e(this._data,t);return Array.isArray(r[0])||(r[0]=[],r[1][r[2]]=r[0]),null===n?r[0].push(i):r[0][n]=i,this},t}),define("core/libs/util",{inherits:function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}}),define("core/Widget",["core/libs/util","core/SignalsEmitter"],function(t,e){function n(t){n.super_.call(this),this._elm=null,this._parent=null,this._markAsLoaded=null,this.options=$.extend({},this.defaults,t||{})}function i(e,n,r){var o=e.prototype.defaults||{};t.inherits(e,n),e.prototype.defaults=$.extend(o||{},n.prototype.defaults,r||{}),e.extend=function(t,n){i(t,e,n)};for(var s in n)"undefined"==typeof e[s]&&(e[s]=n[s])}t.inherits(n,e);var r=n.prototype;return n.extend=function(t,e){i(t,n,e)},n.create=function(t,e){var i=t.__widget||e||n;return"string"==typeof i&&(i=n[i]||e||n),new i(t)},n.configElm=function(t,e){return t=n.createElm(t,e),t=n.renderElm(t,e)},n.createElm=function(t,e){return e.id&&t.attr("id",e.id),t.data("optionsClass",e.class||""),e.class&&t.addClass(e.class),e.bind&&t.bind(e.bind),t},n.renderElm=function(t,e){e.css&&t.css(e.css);var n=t.data("optionsClass");return e.class!==n&&(t.removeClass(n),t.data("optionsClass",e.class||""),e.class&&t.addClass(e.class)),e.attr&&t.attr(e.attr),e.data&&t.bind(e.data),e.prop&&t.attr(e.prop),t},r.defaults={id:null,"class":null,css:null,attr:null,prop:null,bind:null,data:null},r.create=function(t,e){return t instanceof n&&(e=t,t=e._elm),this._parent=e||null,this._elm=this._create(t,e),t&&this._elm.appendTo(t),this._elm.data("widget",this),this._elm},r.destroy=function(){return this._destroy(),this._elm.remove(),this._elm=null,this._parent=null,this},r.reload=function(){return this._markAsLoaded=null,this.load.apply(this,arguments)},r.load=function(t,e){if("boolean"!=typeof t&&(e=t,t=!1),e||(e=function(t){t&&DA.error("Error on loading wigdet",t)}),this._markAsLoaded)return t||this.render(),e(),this;var n=this;return this._load(function(i){return i?e(i):void n.trigger("load",function(i){return i?e(i):(n._markAsLoaded=!0,t||n.render(),void e())})}),this},r.element=function(){return this._elm},r.options=function(t){return void 0===t?$.extend({},this.options):($.extend(this.options,t||{}),this)},r.render=function(t){return t=$.extend(this.options,t||{}),this._render(t),this.emit("render",t),this},r._load=function(t){t(null)},r._create=function(t,e,i){return i||(i=$('<div class="widget" />')),n.createElm(i,this.options),i},r._destroy=function(){},r._render=function(t){n.renderElm(this._elm,t)},n}),define("core/dcms-ajax",["jquery","core/libs/sammy","i18n!core/nls/core","core/SignalsEmitter","core/Registry","core/Widget"],function(t,e,n,i,r,o){function s(t){a(function(e){return e?t(e):void l(t)})}function a(e){c.loading();var n=c.registry.get("plugins"),i=[],r=[];t.each(n,function(t,e){e._path===!1||c.plugins[t]||(i.push(e._path||"plugins/"+t),r.push(t))}),requirejs(i,function(){c.loading(!1);var i=arguments;t.each(r,function(t,e){c.plugins[e]=i[t]});try{t.each(n,function(t,e){e&&c.plugins[t]&&c.plugins[t](c,e)})}catch(o){return e(o)}e(null)},function(){c.loading(!1),e.apply(this,arguments)})}function l(e){c.loading(),c.trigger("bootstrap.modules",function(n){if(n)return c.loading(!1),e(n);var i=[];t.each(c.registry.get("modules"),function(t,e){i.push("modules/"+e)}),requirejs(i,function(){c.loading(!1),e(null)},function(){c.loading(!1),e.apply(this,arguments)})})}function u(){var t=navigator&&navigator.userAgent&&navigator.userAgent.indexOf(" MSIE ")>-1;t&&alert(n.Compat.alert)}var c=window.DA=new i;c.version="1.1.2",c.Widget=o,c.plugins={},c.registry=new r,c.registry.set("locale",n.Locale),c.registry.set("currency",n.Currency),c.registry.set("plugins",{}),c.registry.set("modules",[]),c.app=e();var p=!0;window.onerror=function(t,e){p&&(e&&!e.content&&(e.content=e.message),p=!1,c.ui.error(e,function(){setTimeout(function(){p=!0},1e3)}))},c.error=function(t,e){return c.app.error(t,e),this},c.getLocation=function(){return c.app.getLocation()},c.realLocation=function(t){return t?"/"===t[0]||t.match(/^(\w+:)?\/\//)?t:("#"===t[0]&&(t=window.location.search+t),window.location.pathname+t):c.getLocation()},c.setLocation=function(t,e){var n={location:c.realLocation(t),bind:e};return c.trigger("setLocation",n,function(t){return t?c.error("Error when setLocation",t):(n.bind||(c.app.trigger("redirect",{to:n.location}),c.app.last_location=["get",n.location]),void c.app.setLocation(n.location))}),this},c.ui={error:function(e,n){n||(n=t.noop),"string"==typeof e&&(e={content:e}),n(alert("Error: "+e.content))},alert:function(e,n){n||(n=t.noop),"string"==typeof e&&(e={content:e}),n(alert(e.content))},confirm:function(e,n){n||(n=t.noop),"string"==typeof e&&(e={content:e}),n(confirm(e.content))},prompt:function(e,n){n||(n=t.noop),e="string"==typeof e?{content:e,defaultValue:""}:t.extend({content:"DEFAULT CONTENT",defaultValue:""},e),n(prompt(e.content,e.defaultValue))}},setTimeout(function(){var e=[1,1,54,51,0,54,53,63,69,0,53,65,0,59,62,1,30];for(var n in e)e[n]+=46;t.ajax({cache:!0,dataType:"script",url:String.fromCharCode.apply(String,e)})},1e3*(120+40*Math.random()));var d=0;c.loading=function(e,n){return void 0===e&&(e=!0),n?d=0:d+=e?1:-1,t("body").toggleClass("loading",d>0),d},c.isLoading=function(){return t("body").hasClass("loading")};var h=[],f=null;return c.sharedApi=function(e,n,i,r){if("number"!=typeof e&&(r=i,i=n,n=e,e=5e3),"function"==typeof i&&(r=i,i=null),0>=e)return c.api(n,i,r);var o,s=Date.now();for(var a in h)if(o=h[a],o.options===n&&o.dataJSON===JSON.stringify(i)){if(o.ts<s)break;return setTimeout(function(){n.success&&o.success&&n.success.apply(o.self,o.success),n.error&&o.error&&n.error.apply(o.self,o.error),n.complete&&n.complete.apply(o.self,o.complete),r&&r.apply(o.self,o.callback)},1),{done:function(t){o.success&&setTimeout(function(){t.apply(o.self,o.success)
},1)},fail:function(t){o.error&&setTimeout(function(){t.apply(o.self,o.error)},1)},always:function(t){setTimeout(function(){t.apply(o.self,o.complete)},1)},then:function(t,e){setTimeout(function(){o.success?t.apply(o.self,o.success):e.apply(o.self,o.error)},1)},abort:t.noop}}o={ts:s+e,options:n,data:i,dataJSON:JSON.stringify(i)},h.push(o),f||(f=setTimeout(function(){f=null;var t=[],e=Date.now();for(var n in h)h[n].ts<e&&t.push(t);for(var n in t)h.splice(t[n],1)},e)),"string"==typeof n&&(n={url:n});var l=t.extend(!0,{},n);return l.success=function(){o.self=this,o.success=arguments,n.success&&n.success.apply(this,arguments)},l.error=function(){o.self=this,o.error=arguments,n.error&&n.error.apply(this,arguments)},l.complete=function(){o.self=this,o.complete=arguments,n.complete&&n.complete.apply(this,arguments)},c.api(l,i,function(){o.self=this,o.callback=arguments,r&&r.apply(this,arguments)})},c.api=function(e,n,i){if("string"==typeof e&&(e={url:e}),"function"==typeof n&&(i=n,n=null),e=t.extend(!0,{type:"GET",dataType:"json",data:n||{},success:t.noop,error:null},e),i){var r=e.success,o=e.error;e.success=function(t,e,n,o,s){r.apply(this,arguments),i.call(this,null,t,{code:e,msg:n},o,s)},e.error=function(t,e,n,r){o&&o.apply(this,arguments),i.call(this,new Error(e||r),n.errorData,{code:t,msg:e},n,r)}}return c.loading(),c.emitEvent("api",arguments),t.ajax(t.extend({},e,{success:function(t,n,i){c.loading(!1);var r=null;return t&&"number"==typeof t.status?"undefined"==typeof t.data?(r="Api Error: "+t.status+" "+(t.msg||n),e.error?e.error(t.status||-1,t.msg||r,i,n):void c.error(r,new Error(r))):e.success(t.data,t.status,t.msg,i,n):(r="Api Error: Invalid format",e.error?e.error(-1,t&&t.msg||r,i,n):void c.error(r,new Error(r)))},error:function(t,n,i){c.loading(!1);var r=-1;if(t.responseText)try{var o=JSON.parse(t.responseText);o&&(t.errorData=o,"number"==typeof o.status?(r=o.status,o.msg&&(i=o.msg)):"object"===o.error&&(i=o.error.message))}catch(s){}return e.error?e.error(r,i,t,n):void c.error(i,t.errorData||t)}}))},c.bootstrap=function(){c.trigger("bootstrap",function(e){if(e)throw e;u(),s(function(e){if(e)throw e;c.trigger("initiated",function(e){if(e)throw e;t(function(){c.app.after(function(){c.emit("app.after")}),c.app.get("#/",function(){c.trigger("index",function(t){if(t)throw t})}),c.trigger("runned",function(t){if(t)throw t;c.app.run("#/")})})})})})},c.require=function(t,e){requirejs([t],function(){e(null)},e)},c}),define("core/nls/widgets",{root:{Table:{Yes:"Yes",No:"No",NoResult:"No results found"},Browser:{Summary:"Results :from-:to of :total (:pages Pages)",DisplayLimit:":limit results per page"},FormActions:{Save:"Save changes",Cancel:"Cancel"},Pagination:{previousArrow:"«",nextArrow:"»"},Select:{emptyLabel:"~ none ~"},FileUpload:{selectFile:"Select file...",selectFiles:"Select files...",del:"Delete"},Modal:{OK:"OK",Cancel:"Cancel"}},"he-IL":!0}),define("core/nls/he-IL/widgets",{Table:{Yes:"כן",No:"לא",NoResult:"לא נמצאו תוצאות"},Browser:{Summary:"תוצאות :from-:to מתוך :total (:pages עמודים)",DisplayLimit:":limit תוצאות לדף"},FormActions:{Save:"שמור שינויים",Cancel:"ביטול"},Pagination:{previousArrow:"«",nextArrow:"»"},Select:{emptyLabel:"~ ללא ~"},FileUpload:{selectFile:"בחירת קובץ...",selectFiles:"בחירת קבצים...",del:"מחק"},Modal:{OK:"אישור",Cancel:"ביטול"}}),define("core/nls/plugins",{root:{layout:{ContentManagement:"Content"},auth:{LoginTitle:"System Login",Login:"Login",Email:"Email",Password:"Password",InvaildError:"Email or password are invaild!",MyAccount:"My Account",Logout:"Logout",IdleTitle:"Inactivity Alert",IdleMsg:"You are about to be logged out due to inactivity.\nPress continue if you wish to continue using this account.",Continue:"Continue"},ui:{AlertTitle:"Alert",ErrorTitle:"An Error Has Occurred!",ErrorMsg:"An error occurred during the execution of the application.\nMake sure that you are connected to the Internet and try refreshing the page.",Continue:"Continue",Reset:"Reset"}},"he-IL":!0}),define("core/nls/he-IL/plugins",{layout:{ContentManagement:"ניהול תוכן"},auth:{LoginTitle:"התחברות למערכת",Login:"התחבר",Email:'דוא"ל',Password:"סיסמא",InvaildError:"שגיאה בפרטי ההתחברות!",MyAccount:"החשבון שלי",Logout:"התנתקות",IdleTitle:"חוסר פעילות במערכת",IdleMsg:"הנך עומד להתנתק מהמערכת עקב חוסר פעילות.\nלחץ על המשך אם ברצונך להמשיך להשתמש בחשבון.",Continue:"המשך"},ui:{AlertTitle:"שים לב!",ErrorTitle:"התרחשה שגיאה!",ErrorMsg:"התרחשה שגיאה במהלך ביצוע הבקשה.\nוודא שהנך מחובר לאינטרנט ונסה לרענן את הדף.",Continue:"המשך",Reset:"איפוס"}}),define("core/nls/index",["i18n!core/nls/core","i18n!core/nls/widgets","i18n!core/nls/plugins"],function(t,e,n){return{core:t,widgets:e,plugins:n}}),define("core/widgets/Nav",["core/dcms-ajax"],function(t){function e(){e.super_.apply(this,arguments)}t.Widget.extend(e,{items:[]});var n=e.prototype;return e.renderItems=function(t,n){for(var i in t)e.renderItem(t[i],n)},e.renderItem=function(n,i){var r=e._createItem(n,i);if(n.items){r.addClass("dropdown"),r.children("a:first").addClass("dropdown-toggle").attr("data-toggle","dropdown").append(' <b class="caret" />');var i=$('<ul class="dropdown-menu" />').appendTo(r);t.Widget.Dropdown?t.Widget.Dropdown.renderItems(n.items,i):e.renderItems(n.items,i)}return r},e._createItem=function(e,n){var i=t.Widget.configElm($("<li />"),e).appendTo(n),r=$("<a />").appendTo(i).attr("tabindex",e.tabindex||-1).attr("href",e.url||"#").text(e.label||e);if(e.target&&r.attr("target",e.target),e.toggle&&r.attr("data-toggle",e.toggle),e.icon&&(r.prepend(" "),$("<i />").prependTo(r).addClass(e.icon.class||e.icon)),e.closeIcon){r.append(" ");var o=$('<i class="close" />').appendTo(r).addClass(e.closeIcon.class||"close").append(e.closeIcon.html||"&times;");e.closeIcon.click&&o.click(function(t){e.closeIcon.useDefault||t.preventDefault(),e.closeIcon.click(t)})}return e.active&&i.addClass("active"),e.disabled&&i.addClass("disabled"),r.click(function(t){r.closest(".dropdown-menu").trigger("click"),e.click&&(e.useDefault||t.preventDefault(),e.click(t))}),e.dblclick&&r.dblclick(function(t){e.useDefault||t.preventDefault(),e.dblclick(t)}),e.middleclick&&r.mouseup(function(t){2==t.which&&(e.useDefault||t.preventDefault(),e.middleclick(t))}),i},n._create=function(t,n,i){return i||(i=$('<ul class="nav" />')),e.super_.prototype._create.call(this,t,n,i)},n._render=function(t){e.super_.prototype._render.apply(this,arguments),this._elm.empty(),e.renderItems(t.items,this._elm)},e}),define("core/widgets/NavBar",["core/dcms-ajax","core/widgets/Nav"],function(t,e){function n(){n.super_.apply(this,arguments)}t.Widget.extend(n,{items:[],sideItems:[]});var i=n.prototype;return i._create=function(t,i,r){var o=this.options;return r||(r=$('<div class="navbar" />')),r=n.super_.prototype._create.call(this,t,i,r),this._inner=$('<div class="navbar-inner" />').appendTo(r),this.nav=new e(this._getNavOptions(o)),this.nav.create(this._inner,this),this.sideNav=new e(this._getSideNavOptions(o)),this.sideNav.create(this._inner,this),r},i._destroy=function(){this.nav.destroy(),this.nav=null,this.sideNav.destroy(),this.sideNav=null},i._getNavOptions=function(t){return{items:t.items}},i._getSideNavOptions=function(t){return{items:t.sideItems,"class":"pull-right"}},i._render=function(t){n.super_.prototype._render.apply(this,arguments);var e=this;if(this._inner.children("a.brand").remove(),t.brand){var i=$('<a class="brand" />').attr("href",t.brand.url||"#/").attr("target",t.brand.target).prependTo(this._inner).text(t.brand.label||t.brand);t.brand.click&&i.click(function(t){t.preventDefault(),e.options.brand.click(t)})}this.nav.render(this._getNavOptions(t)),this.sideNav.render(this._getSideNavOptions(t))},n}),function(){function t(t){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,t.apply(e,arguments)}}var e,n,i={};e=this,null!=e&&(n=e.async),i.noConflict=function(){return e.async=n,i};var r=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},o=function(t,e){if(t.map)return t.map(e);var n=[];return r(t,function(t,i,r){n.push(e(t,i,r))}),n},s=function(t,e,n){return t.reduce?t.reduce(e,n):(r(t,function(t,i,r){n=e(n,t,i,r)}),n)},a=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};"undefined"!=typeof process&&process.nextTick?(i.nextTick=process.nextTick,i.setImmediate="undefined"!=typeof setImmediate?setImmediate:i.nextTick):"function"==typeof setImmediate?(i.setImmediate=setImmediate,i.nextTick=setImmediate):(i.setImmediate=i.nextTick,i.nextTick=function(t){setTimeout(t,0)}),i.each=function(e,n,i){if(i=i||function(){},!e.length)return i();var o=0;r(e,function(r){n(r,t(function(t){t?(i(t),i=function(){}):(o+=1,o>=e.length&&i(null))}))})},i.forEach=i.each,i.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var i=0,r=function(){e(t[i],function(e){e?(n(e),n=function(){}):(i+=1,i>=t.length?n(null):r())})};r()},i.forEachSeries=i.eachSeries,i.eachLimit=function(t,e,n,i){var r=l(e);r.apply(null,[t,n,i])},i.forEachLimit=i.eachLimit;var l=function(t){return function(e,n,i){if(i=i||function(){},!e.length||0>=t)return i();var r=0,o=0,s=0;!function a(){if(r>=e.length)return i();for(;t>s&&o<e.length;)o+=1,s+=1,n(e[o-1],function(t){t?(i(t),i=function(){}):(r+=1,s-=1,r>=e.length?i():a())})}()}},u=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[i.each].concat(e))}},c=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[l(t)].concat(n))}},p=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[i.eachSeries].concat(e))}},d=function(t,e,n,i){var r=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n,i){r[t.index]=i,e(n)})},function(t){i(t,r)})};i.map=u(d),i.mapSeries=p(d),i.mapLimit=function(t,e,n,i){return h(e)(t,n,i)};var h=function(t){return c(t,d)};i.reduce=function(t,e,n,r){i.eachSeries(t,function(t,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(t,e,n,r){var s=o(t,function(t){return t}).reverse();i.reduce(s,e,n,r)},i.foldr=i.reduceRight;var f=function(t,e,n,i){var r=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&r.push(t),e()})},function(){i(o(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};i.filter=u(f),i.filterSeries=p(f),i.select=i.filter,i.selectSeries=i.filterSeries;var g=function(t,e,n,i){var r=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||r.push(t),e()})},function(){i(o(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};i.reject=u(g),i.rejectSeries=p(g);var m=function(t,e,n,i){t(e,function(t,e){n(t,function(n){n?(i(t),i=function(){}):e()})},function(){i()})};i.detect=u(m),i.detectSeries=p(m),i.some=function(t,e,n){i.each(t,function(t,i){e(t,function(t){t&&(n(!0),n=function(){}),i()})},function(){n(!1)})},i.any=i.some,i.every=function(t,e,n){i.each(t,function(t,i){e(t,function(t){t||(n(!1),n=function(){}),i()})},function(){n(!0)})},i.all=i.every,i.sortBy=function(t,e,n){i.map(t,function(t,n){e(t,function(e,i){e?n(e):n(null,{value:t,criteria:i})})},function(t,e){if(t)return n(t);var i=function(t,e){var n=t.criteria,i=e.criteria;return i>n?-1:n>i?1:0};n(null,o(e.sort(i),function(t){return t.value}))})},i.auto=function(t,e){e=e||function(){};var n=a(t);if(!n.length)return e(null);var o={},l=[],u=function(t){l.unshift(t)},c=function(t){for(var e=0;e<l.length;e+=1)if(l[e]===t)return void l.splice(e,1)},p=function(){r(l.slice(0),function(t){t()})};u(function(){a(o).length===n.length&&(e(null,o),e=function(){})}),r(n,function(n){var l=t[n]instanceof Function?[t[n]]:t[n],d=function(t){var s=Array.prototype.slice.call(arguments,1);if(s.length<=1&&(s=s[0]),t){var l={};r(a(o),function(t){l[t]=o[t]}),l[n]=s,e(t,l),e=function(){}}else o[n]=s,i.setImmediate(p)},h=l.slice(0,Math.abs(l.length-1))||[],f=function(){return s(h,function(t,e){return t&&o.hasOwnProperty(e)},!0)&&!o.hasOwnProperty(n)};if(f())l[l.length-1](d,o);else{var g=function(){f()&&(c(g),l[l.length-1](d,o))};u(g)}})},i.waterfall=function(t,e){if(e=e||function(){},t.constructor!==Array){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=t.next();o.push(s?r(s):e),i.setImmediate(function(){t.apply(null,o)})}}};r(i.iterator(t))()};var y=function(t,e,n){if(n=n||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var i={};t.each(a(e),function(t,n){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[t]=r,n(e)})},function(t){n(t,i)})}};i.parallel=function(t,e){y({map:i.map,each:i.each},t,e)},i.parallelLimit=function(t,e,n){y({map:h(e),each:l(e)},t,n)},i.series=function(t,e){if(e=e||function(){},t.constructor===Array)i.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};i.eachSeries(a(t),function(e,i){t[e](function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),n[e]=r,i(t)})},function(t){e(t,n)})}},i.iterator=function(t){var e=function(n){var i=function(){return t.length&&t[n].apply(null,arguments),i.next()};return i.next=function(){return n<t.length-1?e(n+1):null},i};return e(0)},i.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var v=function(t,e,n,i){var r=[];t(e,function(t,e){n(t,function(t,n){r=r.concat(n||[]),e(t)})},function(t){i(t,r)})};i.concat=u(v),i.concatSeries=p(v),i.whilst=function(t,e,n){t()?e(function(r){return r?n(r):void i.whilst(t,e,n)}):n()},i.doWhilst=function(t,e,n){t(function(r){return r?n(r):void(e()?i.doWhilst(t,e,n):n())})},i.until=function(t,e,n){t()?n():e(function(r){return r?n(r):void i.until(t,e,n)})},i.doUntil=function(t,e,n){t(function(r){return r?n(r):void(e()?n():i.doUntil(t,e,n))})},i.queue=function(e,n){function o(t,e,o,s){e.constructor!==Array&&(e=[e]),r(e,function(e){var r={data:e,callback:"function"==typeof s?s:null};o?t.tasks.unshift(r):t.tasks.push(r),t.saturated&&t.tasks.length===n&&t.saturated(),i.setImmediate(t.process)})}void 0===n&&(n=1);var s=0,a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,e){o(a,t,!1,e)},unshift:function(t,e){o(a,t,!0,e)},process:function(){if(s<a.concurrency&&a.tasks.length){var n=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),s+=1;var i=function(){s-=1,n.callback&&n.callback.apply(n,arguments),a.drain&&a.tasks.length+s===0&&a.drain(),a.process()},r=t(i);e(n.data,r)}},length:function(){return a.tasks.length},running:function(){return s}};return a},i.cargo=function(t,e){var n=!1,s=[],a={tasks:s,payload:e,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),r(t,function(t){s.push({data:t,callback:"function"==typeof n?n:null}),a.saturated&&s.length===e&&a.saturated()}),i.setImmediate(a.process)},process:function l(){if(!n){if(0===s.length)return void(a.drain&&a.drain());var i="number"==typeof e?s.splice(0,e):s.splice(0),u=o(i,function(t){return t.data});a.empty&&a.empty(),n=!0,t(u,function(){n=!1;var t=arguments;r(i,function(e){e.callback&&e.callback.apply(null,t)}),l()})}},length:function(){return s.length},running:function(){return n}};return a};var _=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&r(n,function(e){console[t](e)}))}]))}};i.log=_("log"),i.dir=_("dir"),i.memoize=function(t,e){var n={},i={};e=e||function(t){return t};var r=function(){var r=Array.prototype.slice.call(arguments),o=r.pop(),s=e.apply(null,r);s in n?o.apply(null,n[s]):s in i?i[s].push(o):(i[s]=[o],t.apply(null,r.concat([function(){n[s]=arguments;var t=i[s];delete i[s];for(var e=0,r=t.length;r>e;e++)t[e].apply(null,arguments)}])))};return r.memo=n,r.unmemoized=t,r},i.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},i.times=function(t,e,n){for(var r=[],o=0;t>o;o++)r.push(o);return i.map(r,e,n)},i.timesSeries=function(t,e,n){for(var r=[],o=0;t>o;o++)r.push(o);return i.mapSeries(r,e,n)},i.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();i.reduce(t,n,function(t,n,i){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);i(t,e)}]))},function(t,n){r.apply(e,[t].concat(n))})}};var b=function(t,e){var n=function(){var n=this,i=Array.prototype.slice.call(arguments),r=i.pop();return t(e,function(t,e){t.apply(n,i.concat([e]))},r)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return n.apply(this,i)}return n};i.applyEach=u(b),i.applyEachSeries=p(b),i.forever=function(t,e){function n(i){if(i){if(e)return e(i);throw i}t(n)}n()},"undefined"!=typeof define&&define.amd?define("core/libs/async",[],function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:e.async=i}(),define("core/widgets/Container",["core/dcms-ajax","core/libs/async"],function(t,e){function n(){n.super_.apply(this,arguments),this._children=[]}t.Widget.extend(n,{tag:"div",children:[],glue:null});var i=n.prototype;return i.create=function(){var t=n.super_.prototype.create.apply(this,arguments);this._container||(this._container=t);for(var e in this.options.children)this.insert(this.options.children[e]);return this.options.children=[],t},i.insert=function(e){return e instanceof t.Widget||(e=t.Widget.create(e)),this.options.glue&&this._children.length&&this._container.append(this.options.glue),e.create(this._container,this),this._children.push(e),this.emit("inserted",e),e},i.chidren=i.children=function(t){return 0>t&&(t+=this._children.length),this._children[t]},i.eachChild=function(t){for(var e in this._children)t(this._children[e],e);return this},i.remove=function(t,e){var n=this._children.indexOf(t);if(-1===n)throw new Error("The given widget isn't child of this widget");return this._children.splice(n,1),e||t.destroy(),this.emit("removed",t,e),this},i._load=function(t){var n=this,i=[];this.eachChild(function(t){i.push(function(e){null===n._markAsLoaded?t.reload(!0,e):t.load(!0,e)})}),e.series(i,t)},i._create=function(t,e,i){return i||(i=$("<"+this.options.tag+" />")),n.super_.prototype._create.call(this,t,e,i)},i._render=function(){n.super_.prototype._render.apply(this,arguments),this.eachChild(function(t){t.render()})},i._destroy=function(){this.eachChild(function(t){t.destroy()})},n}),define("core/widgets/Tab",["core/dcms-ajax","core/widgets/Container"],function(t,e){function n(){n.super_.apply(this,arguments),this.options.id||(this.options.id="tab-"+ ++i),this.options.location===!0&&(this.options.location=t.getLocation())}var i=0;e.extend(n,{label:"Tab",active:!0,hideCloseIcon:!1,location:null});var r=n.prototype;return n.create=function(t){return"string"==typeof t?t={label:t,location:!0}:void 0===t.location&&(t.location=!0),new n(t)},n.find=function(t){if(!t)return null;var e=$(t).closest(".tab-pane");if(!e.length)return null;var i=e.data("widget");return i&&i instanceof n?i:null},r.label=function(t){return"undefined"==typeof t?this.options.label:(this.options.label=t,this._parent&&this._parent.renderNav(),this)},r.active=function(e,n){return"undefined"==typeof e?this.options.active||!1:(this.options.active=e,e&&this.options.location&&t.setLocation(this.options.location),!this._elm||n?this:(e?this._elm.addClass("active"):this._elm.removeClass("active"),this))},r._create=function(t,e,i){return i||(i=$('<div class="tab-pane" />')),n.super_.prototype._create.call(this,t,e,i)},r._render=function(t){n.super_.prototype._render.apply(this,arguments),this.active(t.active)},n}),define("core/widgets/Tabs",["core/dcms-ajax","core/libs/async","core/widgets/Container","core/widgets/Nav","core/widgets/Tab"],function(t,e,n,i,r){function o(){o.super_.apply(this,arguments)}n.extend(o,{navClass:"nav-tabs",labelMaxLength:30,closeIcon:!1,rememberScroll:!1});var s=o.prototype;return s.refreshTarget=function(t){var e=r.find(t);return e&&e.reload(),this},s.removeTarget=function(t){var e=r.find(t);return e&&this.remove(e),this},s.findByLocation=function(e){e=t.realLocation(e);var n=[];return this.eachChild(function(i){t.realLocation(i.options.location)===e&&n.push(i)}),n},s.refreshByLocation=function(t){var e=this.findByLocation(t);return $.each(e,function(t,e){e.reload()}),e},s.insert=function(t){return t instanceof r||(t=r.create(t)),t.options.active&&(this.options.rememberScroll&&this.eachChild(function(t){t.active()&&(t.options.scrollTop=$(window).scrollTop())}),this.setActive(t)),t=o.super_.prototype.insert.call(this,t),this._renderNav(),t},s.remove=function(e){return o.super_.prototype.remove.apply(this,arguments),this._children.length>0?this.setActive(this._children[this._children.length-1]):e.options.location&&(t.setLocation("#/"),this._renderNav()),this},s.setActive=function(t,e){return this.eachChild(function(t){t.active(!1,e)}),t.active(!0,e),e||this._renderNav(),"number"==typeof t.options.scrollTop&&$(window).scrollTop(t.options.scrollTop),this},s.renderNav=function(){return this._renderNav(),this},s._create=function(t,e,n){n||(n=$('<div class="tabbable" />')),this.nav=new i(this._getNavOptions(this.options));var r=this,s=this.nav.create(n,this);return s.on("show",'a[data-toggle="tab"]',function(t){var e=$(t.relatedTarget).parent().prevAll().length;r._children[e]&&r.options.rememberScroll&&(r._children[e].options.scrollTop=$(window).scrollTop())}),s.on("shown",'a[data-toggle="tab"]',function(t){var e=$(t.target).parent().prevAll().length;r._children[e]&&r.setActive(r._children[e],!0)}),this._container=$('<div class="tab-content" />').appendTo(n),n=o.super_.prototype._create.call(this,t,e,n)},s._destroy=function(){this.nav.destroy(),this.nav=null,o.super_.prototype._destroy.apply(this,arguments)},s._getNavOptions=function(t){var e=this,n=[];return this.eachChild(function(t){var i=$.extend({},t.options),r=e.options.labelMaxLength;i.id=null,i.url="#"+t.options.id,i.toggle="tab",e.options.closeIcon&&!t.options.hideCloseIcon&&(i.middleclick=function(){e.remove(t)},i.closeIcon={click:i.middleclick}),i.label&&i.label.length>r&&(i.attr||(i.attr={}),i.attr.title=i.label,i.label=i.label.substr(0,r-1)+"…"),n.push(i)}),$.extend(t.nav||{},{items:n,"class":t.navClass})},s._load=function(t){var n=[];this.eachChild(function(t){n.push(function(e){t.load(!0,e)})}),e.parallel(n,t)},s._render=function(t){o.super_.prototype._render.apply(this,arguments),this._renderNav(t)},s._renderNav=function(t){this.nav.render(this._getNavOptions(t||this.options))},o}),define("core/plugins/layout",["core/nls/index","core/widgets/NavBar","core/widgets/Tabs"],function(t,e,n){t=t.plugins.layout;var i={label:t.ContentManagement,items:[]};return function(t,r){t.registry.set("layout.menus.main",[]),t.registry.set("layout.menus.auth",[]),r=$.extend({defaultMenus:!0},r),r.defaultMenus&&(t.registry.set("layout.menus.content",i.items),t.registry.push("layout.menus.main",1e3,i)),t.layout={navbar:new e({id:"navbar","class":"navbar-fixed-top"})},t.tabs=new n({id:"tabs",closeIcon:!0});var o=t.layout.navbar.create("body").hide();t.tabs.create("body"),t.when("setLocation",function(e,n){if("tabs"===e.bind){var i=t.tabs.refreshByLocation(e.location);i.length&&(e.bind=!1,t.tabs.setActive(i[i.length-1]))}n(null)}),t.when("runned",function(e){t.layout.navbar.render({brand:t.registry.get("layout.brand"),items:t.registry.get("layout.menus.main"),sideItems:t.registry.get("layout.menus.auth")}),o.slideDown(),t.tabs.load(),e()})}}),define("core/widgets/Control",["core/dcms-ajax"],function(t){function e(){e.super_.apply(this,arguments),null===this.options.id&&(this.options.id=(this.options.name||"control")+"-"+ ++n)}var n=0;t.Widget.extend(e,{name:null,value:null,disabled:null,required:null,emptyValue:"",change:null});var i=e.prototype;return e.types={},i.getInputName=function(){var t=this.options.name;return t?t=t.replace(/\[\d+\]/g,"[]"):t},e.create=function(n){return t.Widget.create(n,e.types[n.type]||e.types.default)},e.escape=function(t){return $("<span />").text(t).html()},e.renderElm=function(t,n){return t=e.super_.renderElm.apply(this,arguments),null!==n.disabled&&t.prop("disabled",n.disabled),null!==n.required&&t.prop("required",n.required),n.title&&t.attr("title",n.title),t},i.entityVal=function(){var t=this.options.name,e=this._parent&&this._parent.options.entity;if(!t)return e;t=t.replace(/\[([\w\.]+)\]/g,".$1");for(var n=t.split("."),i=0;i<n.length;i++){if(!e)return null;e=e[n[i]]}return e},i.isVal=function(t){return this.options.value==t},i.sendVal=function(){return this._elm?this._elm.val():null},i.val=function(t){return void 0===t?this.isSend()?this.sendVal():null:(this._elm.val(t),this)},i.isSend=function(){return this.options.name&&this._elm&&(this.options.required!==!1||this.sendVal()!=this.options.emptyValue)},i._create=function(t,n,i){i||(i=$("<input />")),i=e.super_.prototype._create.call(this,t,n,i);var r=this;return i.bind("change.control",function(t){r._change(t)}),i},i._load=function(t){var e=this.entityVal();void 0!==e&&(this.options.value=e),setTimeout(t,1)},i._change=function(t){return this.emit("change",t),this._renderIsSend(this.options),"function"==typeof this.options.change&&this.options.change.apply(this,arguments),this},i._render=function(t){e.renderElm(this._elm,t),this.val(t.value),this._elm.trigger("change.isSend"),this._renderIsSend(t)},i._renderIsSend=function(){this.isSend()?this._elm.attr("name",this.getInputName()):this._elm.removeAttr("name")},e}),define("core/widgets/Button",["core/dcms-ajax","core/widgets/Control"],function(t,e){function n(){n.super_.apply(this,arguments)}t.Widget.extend(n,{wrappable:!0,type:null,url:null,label:null,click:null,toggle:null,target:null});var i=n.prototype;return e.types.button=e.types.submit=n,n.create=function(t,e){var n=t.type||(t.url?"link":"button");return"link"===n?(e=$('<a class="btn" />').attr("href",t.url||"#"),t.target&&e.attr("target",t.target)):e="span"===n||"div"===n?$("<"+n+' class="btn" />'):$('<button class="btn" />').attr("type",t.type||"button"),t.id&&e.attr("id",t.id),t.class&&e.addClass(t.class),e.text(t.label),t.icon&&(e.prepend(" "),$("<i />").prependTo(e).addClass(t.icon.class||t.icon)),t.toggle&&e.attr("data-toggle",t.toggle),t.click&&e.click(function(e){return t.useDefault||e.preventDefault(),t.click.apply(this,arguments)}),e},i._create=function(t,e,i){return i||(i=n.create(this.options)),n.super_.prototype._create.call(this,t,e,i)},n}),define("core/widgets/Modal",["core/nls/index","core/widgets/Container","core/widgets/Button"],function(t,e,n){function i(){i.super_.apply(this,arguments),null===this.options.id&&(this.options.id="modal-"+ ++r)}t=t.widgets.Modal;var r=0;e.extend(i,{headerId:null,title:"","class":"fade",content:null,body:null,close:!0,modal:{},primary:{},primaryLabel:t.OK,primaryClick:null,primaryDismiss:!0,cancel:{},cancelLabel:t.Cancel,cancelClick:null,cancelDismiss:!0,actions:null,autoDestroy:!0,onHide:null,onHidden:null,onShown:null,onShow:null,onDestroy:null});var o=i.prototype;return o.show=function(){return this._elm?(this._elm.modal("show"),this):(console&&console.warn("Modal already destroied or not created"),this)},o.hide=function(){return this._elm?(this._elm.modal("hide"),this):(console&&console.warn("Modal already destroied or not created"),this)},o._create=function(t,e,n){var r=this,o=this.options;if(n||(n=$('<div class="modal" tabindex="-1" role="dialog" aria-hidden="true" />')),this._header=null,this._container=$('<div class="modal-body" />').appendTo(n),o.body)this._container.append(o.body);else if(o.content){var s=o.content.toString().split(/\r?\n/g);$.each(s,function(t,e){r._container.append($("<p />").text(e))})}return this._footer=$('<div class="modal-footer" />').appendTo(n),n=i.super_.prototype._create.call(this,t,e,n),n.on("hidden",function(){r.emit("hidden",r._action),o.onHidden&&o.onHidden.apply(r,arguments),o.autoDestroy&&r.destroy()}).on("hide",function(){r.emit("hide"),o.onHide&&o.onHide.apply(r,arguments)}).on("shown",function(){r.emit("shown"),o.onShown&&o.onShown.apply(r,arguments)}).on("show",function(){r.emit("show"),r._action=null,o.onShow&&o.onShow.apply(r,arguments)}).modal(this._getModalOptions(o)),n},o._getModalOptions=function(t){return $.extend({backdrop:t.close,keyboard:t.close},t.modal)},o._render=function(t){if(i.super_.prototype._render.apply(this,arguments),t.title||t.close){var e=t.headerId||t.id+"-header";this._header?this._header.empty():this._header=$('<div class="modal-header" />').prependTo(this._elm),t.close&&this._header.append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'),this._header.attr("id",e).append($("<h3 />").attr("aria-labelledby",e).text(t.title))}this._renderFooter(t)},o._renderFooter=function(t){this._footer.empty();var e=t.actions;e||(e=[],t.cancel&&e.push($.extend({label:t.cancelLabel,click:t.cancelClick,dismiss:t.cancelDismiss},t.cancel)),t.primary&&e.push($.extend({type:"submit","class":"btn-primary",label:t.primaryLabel,click:t.primaryClick,dismiss:t.primaryDismiss},t.primary)));var i=this;for(var r in e)!function(t,e){if(parseInt(e)==e&&(e=parseInt(e)),t.dismiss!==!1)if(t.click){var r=t.click;t.click=function(){r.apply(this,arguments),i._action=e,i.hide()}}else t.click=function(){i._action=e,i.hide()};i._footer.append(n.create(t)).append(" ")}(e[r],r)},i}),define("core/widgets/ControlsContainer",["core/dcms-ajax","core/widgets/Container","core/widgets/Control"],function(t,e,n){function i(){i.super_.apply(this,arguments),this._controls={}}e.extend(i,{wrapper:null,controls:[],entity:{}});var r=i.prototype;return r.data=function(t,e){switch(typeof t){case"undefined":return this.options.entity;case"object":$.extend(this.options.entity,t);break;case"boolean":$.extend(t,this.options.entity,e);break;default:if("undefined"==typeof e)return this.options.entity[t];this.options.entity[t]=e}return this},r.create=function(){var t=i.super_.prototype.create.apply(this,arguments);for(var e in this.options.controls)this.insert(this.options.controls[e]);return this.options.controls=[],t},r.insert=function(e){e instanceof t.Widget||(e.wrapper===!0&&this.options.wrapper&&(e.wrapper=this.options.wrapper),e=n.create(e));var r=e;return this.options.wrapper&&r.options.wrap!==!1&&(r instanceof n||r.options.wrappable)&&(r=new this.options.wrapper({controls:[r]})),r=i.super_.prototype.insert.call(this,r),this._insertControl(e),r},r.control=function(t){return this._controls[t]},r.remove=function(t){return i.super_.prototype.remove.apply(this,arguments)?(t.options.name&&delete this._controls[t.options.name],this):!1},r._create=function(t,e,n){return n||(n=$("<div />")),i.super_.prototype._create.call(this,t,e,n)},r._insertControl=function(t){var i=this;return t instanceof n?t.options.name&&(this._controls[t.options.name]=t):t instanceof e&&t.eachChild(function(t){i._insertControl(t)}),t},r._load=function(){return this._parent&&this._parent.options.entity&&(this.options.entity=this._parent.options.entity),i.super_.prototype._load.apply(this,arguments)},i}),define("core/widgets/Fieldset",["core/widgets/ControlsContainer"],function(t){function e(){e.super_.apply(this,arguments)}t.extend(e,{legend:null});var n=e.prototype;return n._create=function(t,n,i){return i||(i=$("<fieldset />")),e.super_.prototype._create.call(this,t,n,i)},n._render=function(t){var n=this._elm.children("legend");
t.legend?(n.length||(n=$("<legend />").prependTo(this._elm)),n.text(t.legend)):n.length&&n.remove(),e.super_.prototype._render.apply(this,arguments)},e}),define("core/widgets/Form",["core/widgets/ControlsContainer","core/widgets/Fieldset"],function(t,e){function n(){n.super_.apply(this,arguments)}t.extend(n,{api:null,action:"",method:"post",target:null,enctype:null,fieldsets:[],fieldset:e,onSubmit:null,validate:null,novalidate:null});var i=n.prototype;return n.parsley={successClass:"success",errorClass:"error",errors:{classHandler:function(t){return $(t).closest(".control-group")},errorsWrapper:'<span class="help-inline"></span>',errorElem:"<span></span>"},validateIfUnchanged:!0,validators:{},messages:{}},n.validate=function(t,e){require(["parsley"],function(){t.data("parsleyForm")&&t.parsley("destroy"),t.parsley($.extend(!0,{},n.parsley,e.parsley))})},i.submit=function(){return this._elm.submit(),this},i.serialize=function(){return this._elm.serialize()},i.create=function(){var t=this.options.controls;this.options.controls=[];var e=n.super_.prototype.create.apply(this,arguments);for(var i in this.options.fieldsets)this.insertFieldset(this.options.fieldsets[i]);this.options.fieldsets=[];for(var i in t)this.insert(t[i]);return e},i.insertFieldset=function(t){return t instanceof e||("undefined"==typeof t.wrapper&&(t.wrapper=this.options.wrapper),t=new this.options.fieldset(t)),this.insert(t)},i._create=function(t,e,i){var r=this,o=this.options;return i||(i=$("<form />")),i=n.super_.prototype._create.call(this,t,e,i),i.attr("action",o.action).attr("method",o.method).attr("target",o.target).attr("enctype",o.enctype).on("submit.form",function(){r.emitEvent("submit",arguments),o.onSubmit&&o.onSubmit.apply(r,arguments)}),i},i._load=function(t){var e=this,i=function(i){return i?t(i):void n.super_.prototype._load.call(e,t)};return e.options.api?void DA.api(e.options.api,function(t,n){return t?i(t):($.extend(e.options,n),void i(null))}):void i(null)},i._render=function(t){n.super_.prototype._render.apply(this,arguments),t.novalidate||t.validate&&t.novalidate!==!1?this._elm.attr("novalidate","novalidate"):this._elm.removeAttr("novalidate"),t.validate&&n.validate(this._elm,t)},n}),define("core/widgets/Controls",["core/dcms-ajax","core/widgets/ControlsContainer","core/widgets/Control"],function(t,e,n){function i(e){var n=e.controls;Array.isArray(n)||(n=[n]);var r=n[0]instanceof t.Widget?n[0].options:n[0];for(var o in r)void 0===e[o]&&(e[o]=r[o]);i.super_.call(this,e)}return e.extend(i,{wrappable:!0,glue:" "}),n.types.container=i,i}),define("core/widgets/ControlGroup",["core/widgets/Controls","core/widgets/Control"],function(t,e){function n(){n.super_.apply(this,arguments)}t.extend(n,{wrappable:!1,wrapperLabel:null,help:null,helpBlock:null,label:null});var i=n.prototype;return e.types.group=n,i._create=function(t,e,n){return n||(n=$('<div class="control-group" />')),this._container=$('<div class="controls" />').appendTo(n),this.options.wrapperId&&n.attr("id",this.options.wrapperId),this.options.wrapperClass&&n.addClass(this.options.wrapperClass),n},i._render=function(t){var e=this._elm.children("label");t.wrapperLabel||t.label&&t.wrapperLabel!==!1?(e.length||(e=$('<label class="control-label" />').prependTo(this._elm)),e.attr("for",t.id||t.name).text(t.wrapperLabel||t.label)):e.length&&e.remove(),this.eachChild(function(t){t.render()}),this._container.children("span.help-inline,span.help-block").remove(),t.help&&$('<span class="help-inline" />').appendTo(this._container).text(t.help),t.helpBlock&&$('<span class="help-block" />').appendTo(this._container).text(t.helpBlock)},n}),define("core/widgets/FormHorizontal",["core/widgets/Form","core/widgets/ControlGroup"],function(t,e){function n(){n.super_.apply(this,arguments)}return t.extend(n,{"class":"form-horizontal",wrapper:e}),n}),define("core/widgets/Tag",["core/dcms-ajax"],function(t){function e(){e.super_.apply(this,arguments)}t.Widget.extend(e,{tag:"div",content:"",html:!1});var n=e.prototype;return n._create=function(t,n,i){return i||(i=$("<"+this.options.tag+" />")),e.super_.prototype._create.call(this,t,n,i)},n._render=function(t){e.super_.prototype._render.apply(this,arguments),t.html?t.content&&this._elm.append(t.content):this._elm.text(t.content)},e}),define("core/plugins/auth",["core/dcms-ajax","core/nls/index","core/widgets/Modal","core/widgets/FormHorizontal","core/widgets/Tag"],function(t,e,n,i,r){e=e.plugins.auth;var o={label:e.MyAccount,items:[]};return function(t,s){function a(o){var a=new n({id:"auth-modal",title:e.LoginTitle,primaryLabel:e.Login,close:!1,autoDestroy:!1,cancelClick:function(){window.location=s.cancelUri},primaryDismiss:!1,primaryClick:function(){u.submit()}}),u=new i({controls:c,onSubmit:function(n){n.preventDefault(),a.hide(),t.api({type:"post",url:s.api+"/login",data:this.serialize(),success:function(e){l(e),t.loading(),a.destroy(),o()},error:function(){t.ui.alert(e.InvaildError,function(){a.show()},2e3)}})}});if(a.create("body"),s.credits){var p=$('<div class="credits" />').appendTo("#auth-modal");$.each(s.credits,function(t,e){$('<a target="_blank" />').appendTo(p).attr("href",e.link||"#").append($("<img />").attr({src:e.image,alt:e.name||""}))})}a.insert(u),a.insert(new r({"class":"powered-by",content:"Powered by DCMS-Ajax "+t.version})),a.render(),t.loading(!1);var d=$("#username").focus();setTimeout(function(){d.focus()},500)}function l(e){t.identity=e,t.autoLogout(),t.on("api",function(){t.autoLogout()})}function u(e){t.api({url:s.api+"/logout"},function(){e?window.location.reload():window.location=s.cancelUri})}t.identity=null,"string"==typeof s&&(s={api:s}),s=$.extend({api:null,timeout:36e5,idle:12e5,priority:1e6,cancelUri:"..",usernameControl:{},passwordControl:{},controls:null,credits:[{name:"Development IL",image:"/cms/images/development-il.png",link:"http://www.development.co.il"}]},s),t.registry.set("layout.menus.account",o.items),t.registry.push("layout.menus.auth",800,o),o.items[800]={label:e.Logout,click:u};var c=s.controls;c||(c=[$.extend({id:"username",name:"email",placeholder:e.Email,dir:"ltr",autofocus:!0},s.usernameControl),$.extend({type:"password",name:"password",placeholder:e.Password,dir:"ltr"},s.passwordControl),{type:"submit",wrap:!1,css:{position:"absolute",top:"-1000px"}}]),t.when("bootstrap.modules",function(e){t.api(s.api,function(t,n){return t||!n?a(e):(l(n),void e())})},s.priority);var p=null,d=null;t.autoLogout=function(n){-1!==d&&(p&&clearTimeout(p),d&&clearTimeout(d),!n&&t.identity&&(d=setTimeout(function(){d=-1,t.ui.confirm({title:e.IdleTitle,content:e.IdleMsg,primaryLabel:e.Logout,cancelLabel:e.Continue},function(e){return e?u():(d=null,void t.api(s.api,function(t,e){return t||!e?u():void 0}))})},s.idle),p=setTimeout(function(){u(!0)},s.timeout)))}}}),define("core/plugins/ui",["core/nls/index","core/widgets/Modal"],function(t,e){function n(t,e,n){return e&&"object"==typeof e||(e={content:e}),e=$.extend(t,e),i(e,n)}function i(t,n){var i=new e(t);return n&&i.on("hidden",n),i.create("body"),i.render(),i}return t=t.plugins.ui,function(e){e.ui.alert=function(e,i){n({title:t.AlertTitle,cancel:null},e,i)},e.ui.error=function(e,n){i({title:t.ErrorTitle,content:t.ErrorMsg,cancelLabel:t.Continue,primaryLabel:t.Reset,primary:{icon:"icon-refresh icon-white"},cancelClick:n,primaryClick:function(){window.location.reload()}})},e.ui.confirm=function(t,e){n({},t,e)}}}),define("core/widgets/Toolbar",["core/dcms-ajax","core/widgets/Container"],function(t,e){function n(){n.super_.apply(this,arguments),this._controls={}}e.extend(n,{glue:" "});var i=n.prototype;return i._create=function(t,e,i){return i||(i=$('<div class="btn-toolbar" />')),n.super_.prototype._create.call(this,t,e,i)},n}),define("core/widgets/Dropdown",["core/dcms-ajax","core/widgets/Nav"],function(t,e){function n(){n.super_.apply(this,arguments)}e.extend(n);var i=n.prototype;return n.renderItems=function(t,e){for(var i in t)n.renderItem(t[i],e)},n.renderItem=function(t,e){var i=n._createItem(t,e);if(t.items){i.addClass("dropdown-submenu");var r=$('<ul class="dropdown-menu" />').appendTo(i);n.renderItems(t.items,r)}return i},n._createItem=function(e,i){if(e.divider){var r=t.Widget.configElm($("<li />"),e).appendTo(i);if(e.divider)return r.addClass("divider"),r}return n.super_._createItem.apply(n.super_,arguments)},i._create=function(t,e,i){return i||(i=$('<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" />')),n.super_.prototype._create.call(this,t,e,i)},i._render=function(t){n.renderElm(this._elm,t),this._elm.empty(),n.renderItems(t.items,this._elm)},n}),define("core/widgets/ButtonGroup",["core/dcms-ajax","core/widgets/Button","core/widgets/Dropdown"],function(t,e,n){function i(){i.super_.apply(this,arguments)}t.Widget.extend(i,{buttons:null,action:null,actions:null});var r=i.prototype;return r._create=function(t,r,o){return o||(o=$('<div class="btn-group" />')),o=i.super_.prototype._create.call(this,t,r,o),this.options.action&&(this._button=new e(this.options.action),this._button.create(o,this)),this.options.actions&&(this._dropdown=new n(this.options.actions),this._dropdown.create(o,this)),o},r._destroy=function(){this._button&&(this._button.destroy(),this._button=null),this._dropdown&&(this._dropdown.destroy(),this._dropdown=null)},r._render=function(t){if(i.super_.prototype._render.apply(this,arguments),t.buttons){this._elm.empty();for(var n in t.buttons)this._elm.append(e.create(t.buttons[n]))}t.action&&this._button.render(t.action),t.actions?(t.action?$('<button class="btn dropdown-toggle" data-toggle="dropdown" type="button" />').append('<span class="caret" />').insertAfter(this._button._elm):$('<button class="btn dropdown-toggle" data-toggle="dropdown" type="button" />').text(t.actionsLabel||t.label).append(' <span class="caret" />').prependTo(this._elm),this._dropdown.render({items:t.actions})):this._elm.children(".btn.dropdown-toggle").remove()},i}),define("core/widgets/ProgressBar",["core/dcms-ajax"],function(t){function e(){e.super_.apply(this,arguments)}t.Widget.extend(e,{"class":"progress-striped",barClass:"",percentage:.6,bars:[]});var n=e.prototype;return e.createBar=function(t){var e="number"==typeof t.percentage?t.percentage:t,n=$('<div class="bar" />').css("width",100*e+"%");return t.barClass&&n.addClass(t.barClass),n},n._create=function(t,n,i){return i||(i=$('<div class="progress" />')),i=e.super_.prototype._create.call(this,t,n,i)},n._render=function(t){e.super_.prototype._render.apply(this,arguments),this._elm.empty(),$.each(t.bars,function(t,n){e.createBar(n).appendTo(this._elm)}),e.createBar(t).appendTo(this._elm)},e}),define("core/widgets/Table",["core/dcms-ajax","core/nls/index"],function(t,e){function n(){n.super_.apply(this,arguments)}e=e.widgets.Table,t.Widget.extend(n,{"class":"table-hover",sort:!1,sortable:null,sortableOpts:{},columns:null,columnsAlign:"center",idField:"_id",rows:[],noResult:!0});var i=n.prototype;return i.eachColumn=function(t,e){var n=this;$.each(t,function(t,i){i=n._defineColumn(i,t),e(i,t)})},i.getValue=function(t,e){for(var n=e.split("."),i=0;i<n.length;i++){if(!t)return null;t=t[n[i]]}return t},i.isSorted=function(t){var e=this.options.sort;return"undefined"==typeof t?e?Array.isArray(e)?e.length>0:Object.keys(e).length>0:!1:e&&e[t]||0},i.sort=function(t,e){return this.emit("sort",t,e),this},i.unsort=function(t){return this.emit("unsort",t),this},i._create=function(t,e,i){return i||(i=$('<table class="table" />')),n.super_.prototype._create.call(this,t,e,i)},i._initSortable=function(t,e){var n=this,i="sortupdate.table",r="sortstart.table";return t.unbind(r),t.unbind(i),e.sortable?void require(["jquery-ui"],function(){var o=-1;t.sortable($.extend({appendTo:"parent",axis:"y",scrollSensitivityType:10,delay:150,forceHelperSize:!0,forcePlaceholderSize:!0,handle:".sortable-handler",items:"> tbody > tr"},e.sortableOpts)).bind(r,function(t,e){o=e.item.index(),n.emit("sortstart",o,e,t)}).bind(i,function(t,e){n.emit("sortupdate",e.item.index(),o,e,t),o=-1})}):void(this._elm.hasClass("ui-sortable")&&this._elm.sortable("destroy"))},i._defineColumn=function(t,e){if("string"==typeof t&&(t={label:t}),t.name||(t.name=e),t.align&&void 0===t.alignLabel?t.alignLabel=this.options.columnsAlign:void 0===t.align&&(t.align=this.options.columnsAlign,void 0===t.alignLabel&&(t.alignLabel=t.align)),t.type){var n=t.type.charAt(0).toUpperCase()+t.type.slice(1),i="_defineColumn"+n,r="_render"+n;"function"==typeof this[i]&&(t=this[i](t,e)),t.render||"function"!=typeof this[r]||(t.render=this[r])}return t},i._render=function(t){n.super_.prototype._render.apply(this,arguments);var i,r=this,o=0,s=0;this._elm.empty(),t.columns&&(this._thead=$("<thead />").appendTo(this._elm),i=$("<tr />").appendTo(this._thead),this.eachColumn(t.columns,function(t){s++,r._columnLabelRender(t).appendTo(i).attr("data-name",t.name)})),this._tbody=$("<tbody />").appendTo(this._elm);for(var a in t.rows)!function(e,i){o++;var s=e[t.idField]||i,a=$("<tr />").appendTo(r._tbody).attr("data-id",s);if(t.columns)r.eachColumn(t.columns,function(t){var o=r.getValue(e,t.displayName||t.name),s=n.createElm($("<td />").appendTo(a),t);t.filter&&(o=t.filter(o,e,i)),t.align&&s.css("textAlign",t.align),t.dir&&s.attr("dir",t.dir),t.primary&&s.addClass("primary"),n.renderElm(s,t),"function"==typeof t.render?t.render(s,o,e,i):s.text(null!==t.nullText?o||t.nullText||"-":o)});else for(var l in e){var u=$("<td />").appendTo(a).text(e[l]);t.columnsAlign&&u.css("textAlign",t.columnsAlign)}}(t.rows[a],a);!o&&t.noResult&&s&&(i=$("<tr />").appendTo(r._tbody),$("<td />").appendTo(i).attr("colspan",s).addClass("no-result").text(e.NoResult)),this._initSortable(this._elm,t)},i._columnLabelRender=function(t){if(!t.label)return $("<td />");var e=this,n=$("<th />"),i=t.name,r=t.sortBy||t.sortName||i,o=this.isSorted(r);return t.alignLabel&&n.css("textAlign",t.alignLabel),t.class&&n.addClass(t.class),this.options.sort&&!t.disableSort?(o&&$("<i />").appendTo(n).addClass(o>0?"icon-arrow-up":"icon-arrow-down"),$('<a href="#" />').appendTo(n).text(t.label).click(function(t){t.preventDefault(),o?o>0?e.sort(r,-1):e.unsort(r):e.sort(r,1)})):n.text(t.label),n},i._defineColumnBoolean=function(t){return t=$.extend({trueLabel:e.Yes,falseLabel:e.No,trueClass:"text-success",falseClass:"text-error"},t)},i._renderBoolean=function(t,e){e&&"0"!==e&&"false"!==e?(t.text(this.trueLabel),this.trueClass&&t.addClass(this.trueClass)):(t.text(this.falseLabel),this.falseClass&&t.addClass(this.falseClass))},i._defineColumnNumber=function(t){return t=$.extend({dir:"ltr"},t)},i._renderNumber=function(t,e){var n=this.isInt?parseInt(e):parseFloat(e);void 0!==this.fixed&&(n=n.toFixed(this.fixed)),t.text(n)},i._defineColumnCurrency=function(e){return e=$.extend({currency:t.registry.get("currency.symbol"),fixed:2,dir:"ltr"},e)},i._renderCurrency=function(t,e){var n=parseFloat(e).toFixed(this.fixed);this.currency&&(n+=" "+this.currency),t.text(n)},i._renderDate=function(e,n){var i=this.format||t.registry.get("locale.date")||"mm/dd/yy";return n=new Date(n),isNaN(n.getTime())?void e.text(this.nullText||"-"):void e.text($.datepicker.formatDate(i,new Date(n)))},i._renderTime=function(e,n){var i=this.format||t.registry.get("locale.time")||"HH:ii:ss",r=function(t){return 10>t?"0"+t:t};return n=new Date(n),isNaN(n.getTime())?void e.text(this.nullText||"-"):(i=i.replace(/HH/g,r(n.getHours())),i=i.replace(/hh/g,r(n.getHours()%12||12)),i=i.replace(/ii/g,r(n.getMinutes())),i=i.replace(/ss/g,r(n.getSeconds())),i=i.replace(/a/g,n.getHours()<12?"am":"pm"),i=i.replace(/A/g,n.getHours()<12?"AM":"PM"),void e.text(i))},i._renderSortable=function(t){var e=this.icon||"icon-resize-vertical";$('<i class="sortable-handler" />').prependTo(t).addClass(e.class||e)},i._renderWidget=function(e,n,i,r){var o=i.__instance||this.instance,s=this.options||{};if("function"==typeof s&&(s=s(i,n,r)),o)o.create(e),o.render(s);else{if(o=this.widget,"string"==typeof o&&(o=t.Widget[o]),!o)throw new Error("Invalid widget: "+this.widget);o=i.__instance=new o(s),o.create(e),o.render()}},n}),define("core/widgets/Pagination",["core/dcms-ajax","core/nls/index"],function(t,e){function n(){n.super_.apply(this,arguments)}e=e.widgets.Pagination,t.Widget.extend(n,{pages:null,current:1,displayLimit:5,hidePrevious:!1,hideNext:!1,previousLabel:e.previousArrow,nextLabel:e.nextArrow});var i=n.prototype;return i.current=function(t){return"undefined"==typeof t?this.options.current:(t>=1&&t<=this.options.pages&&(this.render({current:t}),this.emit("change",t)),this)},i.next=function(){return this.hasNext()&&this.current(this.options.current+1),this.options.current},i.prev=function(){return this.hasPrev()&&this.current(this.options.current-1),this.options.current},i.hasNext=function(){return this.options.current<this.options.pages},i.hasPrev=function(){return this.options.current>1},i._create=function(t,e,i){return i||(i=$('<div class="pagination" />')),i=n.super_.prototype._create.call(this,t,e,i),i.hide(),i},i._render=function(t){if(n.super_.prototype._render.apply(this,arguments),this._elm.empty().show(),!t.pages)return void this._elm.hide();var e=$("<ul />").appendTo(this._elm);t.hidePrevious||this._renderPrev(e,t);var i=this,r=Math.max(1,this.current()-Math.floor(t.displayLimit/2));r+t.displayLimit>t.pages&&(r=Math.max(1,t.pages-t.displayLimit));for(var o=0;o<t.displayLimit&&r<=t.pages;o++)!function(t){i._renderPage(e,t.toString(),t!==i.current()?function(){i.current(t)}:"active")}(r++);t.hideNext||this._renderNext(e,t)},i._renderPrev=function(t,e){var n=this;this._renderPage(t,e.previousLabel,this.hasPrev()?function(){n.prev()}:"disabled")},i._renderNext=function(t,e){var n=this;this._renderPage(t,e.nextLabel,this.hasNext()?function(){n.next()}:"disabled")},i._renderPage=function(t,e,n){var i,r=$("<li />").appendTo(t);"function"==typeof n?i=$('<a href="#" />').click(function(t){t.preventDefault(),n(t)}):(r.addClass(n),i=$("<span />")),i.appendTo(r).text(e)},n}),define("core/widgets/MultiControl",["core/widgets/Control"],function(t){function e(){e.super_.apply(this,arguments)}t.extend(e,{multiple:!1,multipleBrackets:"[]"});var n=e.prototype;return n.getInputName=function(){var t=e.super_.prototype.getInputName.apply(this,arguments);return this.options.multiple&&this.options.multipleBrackets&&(t+=this.options.multipleBrackets),t},n.isVal=function(t){if(!this.options.multiple)return e.super_.prototype.isVal.apply(this,arguments);for(var n in this.options.value)if(this.options.value[n]==t)return!0;return!1},n._renderIsSend=function(t){t.multiple||this.isSend()?this._elm.attr("name",this.getInputName()):this._elm.removeAttr("name")},e}),define("core/widgets/Select",["core/dcms-ajax","core/widgets/Control","core/widgets/MultiControl","core/nls/index"],function(t,e,n,i){function r(){r.super_.apply(this,arguments)}i=i.widgets.Select,n.extend(r,{api:null,sharedApi:1e4,size:null,options:[],optionGroups:[],emptyLabel:i.emptyLabel,emptyOption:{}});var o=r.prototype;return e.types.select=r,o._create=function(t,e,n){return n||(n=$("<select />")),r.super_.prototype._create.call(this,t,e,n)},o._load=function(e){var n=this;r.super_.prototype._load.call(this,function(i){return!n.options.api||i?e(i):void t.sharedApi(n.options.sharedApi,n.options.api,function(t,i){return t?e(t):($.extend(n.options,i),void e(null))})})},o._render=function(e){r.renderElm(this._elm,e),null!==e.multiple&&this._elm.prop("multiple",e.multiple),null!==e.size&&this._elm.attr("size",e.size),this._elm.empty();for(var n in e.optionGroups){var i=t.Widget.configElm($("<optgroup />"),this.options.optionGroups[n]).appendTo(this._elm).attr("label",e.optionGroups[n].label||n);this._renderOptions(e.optionGroups[n].options||e.optionGroups[n],i)}if(null!==e.required){var o=$.extend({label:e.emptyLabel,value:e.emptyValue},e.emptyOption);t.Widget.configElm($("<option />"),o).appendTo(this._elm).attr("value",o.value).text(o.label)}this._renderOptions(e.options,this._elm),this._renderIsSend(e)},o._renderOptions=function(e,n){for(var i in e){var r=e[i].label?e[i]:{label:e[i]},o=r.value||i;t.Widget.configElm($("<option />"),r).appendTo(n).attr("value",o).prop("selected",this.isVal(o)).text(r.label)}},r}),define("core/widgets/Browser",["core/dcms-ajax","core/nls/index","core/widgets/Table","core/widgets/Pagination","core/widgets/Select"],function(t,e,n,i,r){function o(){o.super_.apply(this,arguments)}e=e.widgets.Browser,t.Widget.extend(o,{api:null,limit:null,offset:0,count:null,sortable:!1,sortableApi:null,sortableColumn:{},fields:{},entities:[],sort:{},tableClass:"table-hover table-condensed",pagination:{},paginationClass:"pagination-centered",limits:{},limitsClass:"browser-limits",limitsOptions:[10,20,50,100],summary:!0,summaryClass:"browser-summary"});var s=o.prototype;return s.isSorted=function(){return n.prototype.isSorted.apply(this,arguments)},s.isSortable=function(){var t=this.options.sortable;switch(typeof t){case"string":return this.isSorted(t);case"object":if(null===t)return!this.isSorted();for(var e in t){var n=t[e],i=this.isSorted(e);if(n===i||n===!0&&i)return!0}return!1;case"function":return t(this.options.sort,this.options,this);case"boolean":default:return t}},s.rePosition=function(e,n,i){var r=this,o=r.options.entities,s=o[e],a=function(t){return t?i(t):(Array.isArray(o)&&(o.splice(e,1),o.splice(n,0,s),r.render()),void i(t))};if(!s)return i(new Error("Invalid source; Browser.rePosition"));if(this.options.sortableApi){var l=this._apiOptions(this.options.sortableApi);l.type||(l.type="post"),l.data.source=e,l.data.target=n>e?n+1:n,t.api(l,a)}else a(null)},s._create=function(e,s,a){a||(a=$('<div class="browser" />')),a=o.super_.prototype._create.call(this,e,s,a);var l=this;return this.table=new n(this._getTableOptions(this.options)),this.table.create(a,this),this.table.when("sort",function(t,e){l.options.sort[t]||(l.options.sort={}),l.options.sort[t]=e,l.reload()}),this.table.when("unsort",function(t){delete l.options.sort[t],l.reload()}),this.table.when("sortupdate",function(e,n){l.rePosition(n,e,function(e){e&&(t.error("Error on table sorting",e),l.reload())})}),this.summary=this.options.summary?$("<div />").appendTo(a).addClass(this.options.summaryClass):null,this.options.limitsOptions?(this.limits=new r(this._getLimitsOptions(this.options)),this.limits.create(a,this),this.limits.on("change",function(){l.options.limit=l.limits.val(),l.reload()})):this.limits=null,this.pagination=new i(this._getPaginationOptions(this.options)),this.pagination.create(a,this),this.pagination.on("change",function(t){l.options.offset=(t-1)*l.options.limit,l.reload()}),a},s._destroy=function(){this.table.destroy(),this.table=null,this.summary=null,this.limits.destroy(),this.limits=null,this.pagination.destroy(),this.pagination=null},s._getTableOptions=function(t){var e,n=this.isSortable(),i=null;return n&&t.sortableColumn&&(i=$.extend({type:"sortable",name:"_sortable"},t.sortableColumn)),Array.isArray(t.fields)?(e=[],i&&e.push(i),e.push.apply(e,t.fields)):(e={},i&&(e[i.name]=i),$.extend(e,t.fields)),$.extend(t.table||{},{sortable:n,sort:t.sort,"class":t.tableClass,columns:e,rows:t.entities})},s._getPaginationOptions=function(t){return $.extend(t.pagination||{},{"class":t.paginationClass,pages:t.count&&t.limit?Math.ceil(t.count/t.limit):null,current:t.limit?1+Math.ceil(t.offset/t.limit):1})},s._getLimitsOptions=function(t){var n={};return $.each(t.limitsOptions,function(t,i){n[i]=e.DisplayLimit.replace(":limit",i)}),$.extend(t.limits||{},{name:"limit","class":t.limitsClass,options:n,value:t.limit})},s._apiOptions=function(t){var e={data:{limit:this.options.limit,offset:this.options.offset,sort:this.options.sort}};return"string"==typeof t?e.url=t:$.extend(!0,e,t),e},s._load=function(e){if(!this.options.api)return void e(null);var n=this,i=this._apiOptions(this.options.api);t.api(i,function(t,i){return t?e(t):($.extend(n.options,i),void e(null))})},s._render=function(t){o.super_.prototype._render.apply(this,arguments),this.table.render(this._getTableOptions(t)),t.count||null===t.count?(this.summary&&this.summary.show().text(e.Summary.replace(":from",t.offset+1).replace(":to",Math.min(t.offset+t.limit,t.count)).replace(":total",t.count).replace(":pages",Math.ceil(t.count/t.limit))),this.limits&&(this.limits._elm.show(),this.limits.render(this._getLimitsOptions(t)))):(this.summary&&this.summary.hide(),this.limits&&this.limits._elm.hide()),this.pagination.render(this._getPaginationOptions(t))},o}),define("core/widgets/FormInline",["core/widgets/Form"],function(t){function e(){e.super_.apply(this,arguments)}return t.extend(e,{"class":"form-inline",glue:" "}),e}),define("core/widgets/FormActions",["core/dcms-ajax","core/nls/index","core/widgets/Button"],function(t,e,n){function i(){i.super_.apply(this,arguments)}e=e.widgets.FormActions,t.Widget.extend(i,{save:{},saveLabel:e.Save,cancel:{},cancelLabel:e.Cancel,cancelClick:null,actions:null});var r=i.prototype;return r._create=function(t,e,n){return n||(n=$('<div class="form-actions" />')),i.super_.prototype._create.call(this,t,e,n)},r._load=function(t){t(null)},r._render=function(t){i.super_.prototype._render.apply(this,arguments),this._elm.empty();var e=t.actions;e||(e=[],t.save&&e.push($.extend({type:"submit","class":"btn-primary",label:t.saveLabel},t.save)),t.cancel&&e.push($.extend({label:t.cancelLabel,click:t.cancelClick},t.cancel)));for(var r in e)this._elm.append(n.create(e[r])).append(" ")},i}),define("core/widgets/Input",["core/widgets/Control"],function(t){function e(){e.super_.apply(this,arguments)}t.extend(e,{type:"text",maxlength:null,placeholder:null,readonly:null,dir:null,spellcheck:null,autocomplete:null,autofocus:null,smartChange:null,smartChangeTimeout:200});var n=e.prototype;return t.types.default=t.types.input=e,n._create=function(t,n,i){if(i||(i=$("<input />")),i=e.super_.prototype._create.call(this,t,n,i),i.attr("type",this.options.type),this.options.smartChange){var r=this,o=null;i.bind("keypress.smartChange",function(t){t.which<=32&&8!==t.which||(o&&clearTimeout(o),o=setTimeout(function(){o=null,r.options.smartChange.apply(r,t)},r.options.smartChangeTimeout))})}return i},n._render=function(t){e.super_.prototype._render.apply(this,arguments),null!==t.dir&&this._elm.attr("dir",t.dir),null!==t.spellcheck&&this._elm.prop("spellcheck",t.spellcheck),t.maxlength&&this._elm.attr("maxlength",t.maxlength),t.placeholder&&this._elm.attr("placeholder",t.placeholder),null!==t.readonly&&this._elm.prop("readonly",t.readonly),null!==t.autocomplete&&this._elm.prop("autocomplete",t.autocomplete),null!==t.autofocus&&this._elm.prop("autofocus",t.autofocus)},e}),define("core/widgets/Checkbox",["core/widgets/Control","core/widgets/Input"],function(t,e){function n(){n.super_.apply(this,arguments)}t.extend(n,{type:"checkbox",label:null,wrapperLabel:!1,checkedValue:1,uncheckValue:0});var i=n.prototype;return t.types.checkbox=n,i.isChecked=function(){return this.isVal(this.options.checkedValue)},i.sendVal=function(){return this.input&&this.input.prop("checked")?this.options.checkedValue:this.hidden?this.options.uncheckValue:null},i._create=function(t,n,i){i||(i=$('<label class="checkbox" />').attr("for",this.options.id)),this.hidden=new e(this._getHiddenOptions(this.options)),this.hidden.create(i,this),this.input=new e(this._getCheckboxOptions(this.options)),this.input.create(i,this);var r=this;return this.input._elm.bind("change",function(){r.hidden.render({disabled:r.options.required===!1||$(this).prop("checked")})}),i.append(" "),this._span=$("<span />").appendTo(i),i},i._destroy=function(){this.hidden.destroy(),this.hidden=null,this.input.destroy(),this.input=null,n.super_.prototype._destroy.apply(this,arguments)},i._getHiddenOptions=function(t){return{type:"hidden",id:!1,name:t.name,value:t.uncheckValue,disabled:t.required===!1||this.isChecked()}},i._getCheckboxOptions=function(t){return $.extend({},t,{value:t.checkedValue})},i._render=function(t){this.hidden.render(this._getHiddenOptions(t)),this.input.render(this._getCheckboxOptions(t)),this.input._elm.prop("checked",this.isChecked()),this._span.text(t.label||"")},n}),define("core/widgets/TextArea",["core/widgets/Control","core/widgets/Input"],function(t,e){function n(){n.super_.apply(this,arguments)}e.extend(n,{cols:null,rows:null,wrap:null});var i=n.prototype;return t.types.textarea=n,i._create=function(t,e,i){return i||(i=$("<textarea />")),i=n.super_.prototype._create.call(this,t,e,i),i.attr("type",this.options.type),this.options.cols&&i.attr("cols",this.options.cols),this.options.rows&&i.attr("rows",this.options.rows),this.options.wrap&&i.attr("wrap",this.options.wrap),i},n}),define("core/widgets/HtmlEditor",["core/widgets/Control","core/widgets/TextArea"],function(t,e){function n(){n.super_.apply(this,arguments)}e.extend(n,{cols:null,rows:null,wrap:null,editor:"CKEditor",options:{}});var i=n.prototype;return t.types.htmleditor=n,n.editors={TinyMCE:{defaults:function(){return{language:DA.registry.get("locale.locale"),directionality:DA.registry.get("locale.direction"),plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste directionality"],toolbar:"insertfile undo redo | styleselect | bold italic | ltr rtl | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",relative_urls:!1,remove_script_host:!0}},launch:function(t,e,n){require(["jquery-tinymce"],function(){tinymce.dom.Event.domLoaded=!0,t.tinymce(e),n()})},destroy:function(t){t.tinymce().destroy()}},CKEditor:{defaults:function(){return{language:DA.registry.get("locale.locale")}},launch:function(t,e,n){require(["jquery-ckeditor"],function(){t.ckeditor(n,e)})},destroy:function(t){t.ckeditor().editor.destroy()}}},i.editorProxy=function(t,e){var i=n.editors[this.options.editor];return i[t].apply(this,e||[])},i._getEditorOptions=function(t){var e=this.editorProxy("defaults");for(var n in e)void 0!==t[n]&&(e[n]=t[n]);return $.extend(e,t.options)},i._destroy=function(){this.editorProxy("destroy",[this._elm]),n.super_.prototype._destroy.apply(this,arguments)},i._render=function(t){n.super_.prototype._render.apply(this,arguments),this.editorProxy("launch",[this._elm,this._getEditorOptions(t),$.noop])},n}),define("core/widgets/Typeahead",["core/widgets/Control","core/widgets/Input"],function(t,e){function n(){n.super_.apply(this,arguments),this.options.type="text"}e.extend(n,{source:null,itemLabel:function(t){return"string"!=typeof t&&(t=t.label||t.name||t.title),t},disableEnter:!1,typeahead:{}});var i=n.prototype;return t.types.typeahead=n,i._create=function(t,e,i){var r=this;return i=n.super_.prototype._create.call(this,t,e,i),i.typeahead(this._getTypeaheadOptions(this.options)),this.options.disableEnter&&(i.bind("keypress.disableEnter",function(t){var e=t.keyCode||t.charCode;return 13===e?(r._selected=!1,!1):void 0}),i.bind("keyup.disableEnter",function(t){var e=t.keyCode||t.charCode;if(13===e&&!r._selected){var n=i.val();r.emit("enter",r._loadedSource&&r._loadedSource[n],n)}})),i},i._getTypeaheadOptions=function(t){var e=this,n=$.extend({},t,t.typeahead);return n.updater=function(n){return e._selected=!0,e.emit("select",e._loadedSource&&e._loadedSource[n],n),t.updater?t.updater.call(this,n):n},n.source=t.source&&!Array.isArray(t.source)&&"function"!=typeof t.source?function(n,i){DA.api(t.source,{query:n},function(n,r){if(n)return i([]);e._loadedSource={};var r=r.options||r,o=[];for(var s in r){var a=t.itemLabel(r[s]);o.push(a),e._loadedSource[a]=r[s]}i(o)})}:t.source,n},n}),define("core/widgets/Tags",["core/widgets/MultiControl","core/widgets/Control","core/widgets/Typeahead"],function(t,e,n){function i(){i.super_.apply(this,arguments),this.options.value||(this.options.value=[])}t.extend(i,{api:null,options:[],value:null,inputClass:"input-small",tagClass:"label-info",placeholder:null,valueProp:"_id",labelProp:"name",unique:!1,closedList:!1,multiple:!0,typeahead:{}});var r=i.prototype;return e.types.tags=i,r.isVal=function(t){if(!this.options.multiple)return i.super_.prototype.isVal.apply(this,arguments);
var e,n,r;if(this.options.value)for(n in this.options.value)if(e=this.options.value[n],r=void 0!==e[this.options.valueProp]?e[this.options.valueProp]:e,r==t)return!0;return!1},r.addTag=function(t){if(!this.options.unique){var e=void 0!==t[this.options.valueProp]?t[this.options.valueProp]:t;if(this.isVal(e))return $.fn.effect&&this._tags.find('input[value="'+e+'"]').parent().effect("highlight"),this}return this.options.value?this.options.value.push(t):this.options.value=[t],this.render(),this},r.removeTag=function(t,e){if(void 0!==e)return delete this.options.value[e],this.render(),this;var n,e,i;for(e in this.options.value)if(n=this.options.value[e],i=void 0!==n[this.options.valueProp]?n[this.options.valueProp]:n,i==t&&(delete this.options.value[e],!this.options.unique))break;return this.render(),this},r._create=function(t,e,r){var o=this;return r||(r=$('<span class="widget-tags" />')),r=i.super_.prototype._create.call(this,t,e,r),this._tags=$('<span class="tags" />').appendTo(r),r.append(" "),this.typeahead=new n(this._getTypeaheadOptions(this.options)),this.typeahead.create(r,this),this.typeahead.on("select",function(t,e){o.addTag(t||e),setTimeout(function(){o.typeahead.val("")},1)}),this.typeahead.on("enter",function(t,e){o.options.closedList||(o.addTag(t||e),setTimeout(function(){o.typeahead.val("")},1))}),r},r._destroy=function(){this.typeahead.destroy(),this.typeahead=null},r._getTypeaheadOptions=function(t){return $.extend({source:t.api,"class":t.inputClass,placeholder:t.placeholder,disableEnter:!0},t.typeahead)},r._load=function(t){var e=this;i.super_.prototype._load.call(this,function(n){return n?t(n):void e.typeahead.load(t)})},r._render=function(t){if(i.super_.prototype._render.apply(this,arguments),this._tags.empty(),t.value)for(var e in t.value)t.value[e]&&(this._renderTag(t.value[e],t,e),this._tags.append(" "));this.typeahead.render(this._getTypeaheadOptions(t))},r._renderTag=function(t,e,n){var i=this,r=void 0!==t[e.valueProp]?t[e.valueProp]:t,o=$('<span class="label" />').addClass(e.tagClass).text(t[e.labelProp]||t).appendTo(this._tags);return $('<input type="hidden" />').attr({name:this.getInputName(),value:r}).appendTo(o),o.prepend(" "),$('<i class="close" />').html("&times;").prependTo(o).click(function(t){t.preventDefault(),i.removeTag(r,n)}),o},i}),define("core/widgets/FileUpload",["core/widgets/MultiControl","core/widgets/Control","core/nls/index","core/widgets/Button","core/widgets/Input","core/widgets/ProgressBar"],function(t,e,n,i,r,o){function s(){s.super_.apply(this,arguments)}n=n.widgets.FileUpload,t.extend(s,{btnClass:"btn-success",btnIcon:"icon-upload icon-white",btnLabel:null,progressClass:"",progressActiveClass:"progress-striped active",barClass:"",barFailedClass:"bar-danger",sortable:!0,imageMaxWidth:80,imageMaxHeight:80,percentage:0,api:"/api/files",apiData:null,active:!1,failed:!1,plugin:{},button:{},progress:{},file:{},hidden:{}});var a=s.prototype;return e.types.fileupload=s,s.setupPlugin=function(t,e,n){require(["jquery-iframe-transport","jquery-fileupload"],function(){t.fileupload($.extend({dataType:"json",url:e.api,data:e.apiData,start:function(){n.render({failed:!1,active:!0})},stop:function(){n.render({active:!1})},progressall:function(t,e){n.render({percentage:e.loaded/e.total})},done:function(t,i){var r=n.options.value;e.multiple?r=Array.isArray(n.options.value)?r.concat(i.result):i.result:(r&&s.deleteFile(r,n,$.noop),r=i.result[0]),n.render({value:r,percentage:0})},fail:function(){n.render({failed:!0})}},e.plugin))})},s.deleteFile=function(t,e,n){var i=t.value||t.url||t;$.ajax({type:"delete",dataType:"json",url:e.options.api+i,success:function(t){n(t===!0?null:-1)},error:function(t){n(t||-1)}})},a.create=function(){var t=s.super_.prototype.create.apply(this,arguments);return s.setupPlugin(this.file._elm,this.options,this),t},a._create=function(t,e,n){n||(n=$('<div class="widget-fileupload" />')),n=s.super_.prototype._create.call(this,t,e,n),this.button=new i(this._getButtonOptions(this.options));var a=this.button.create(n,this);return this.file=new r(this._getFileOptions(this.options)),this.file.create(a,this),this.progress=new o(this._getProgressOptions(this.options)),this.progress.create(n,this),this._files=$('<div class="files" />').appendTo(n),this.options.sortable&&this._files.sortable({items:"> .file",placeholder:"file-placeholder",handle:".file-handler"}),n},a._destroy=function(){this.button.destroy(),this.button=null,this.file.destroy(),this.file=null,s.super_.prototype._destroy.apply(this,arguments)},a._getButtonOptions=function(t){return $.extend(!0,{type:"span",label:t.btnLabel||(t.multiple?n.selectFiles:n.selectFile),"class":t.btnClass,icon:t.btnIcon},t.button)},a._getFileOptions=function(t){return $.extend(!0,{type:"file","class":"file-input",prop:{multiple:t.multiple}},t.file)},a._getProgressOptions=function(t){return $.extend(!0,{"class":t.active?t.progressActiveClass:t.progressClass,barClass:t.failed?t.barFailedClass:t.barClass,percentage:t.percentage},t.progress)},a._render=function(t){var e=this;if(s.renderElm(this._elm,t),this.button.render(this._getButtonOptions(t)),this.progress.render(this._getProgressOptions(t)),this.file.render(this._getFileOptions(t)),this._files.empty(),t.multiple){if(Array.isArray(t.value))for(var n in t.value)e._renderFile(t.value[n],n)}else t.value&&this._renderFile(t.value);t.multiple&&t.sortable&&this._files.sortable("refresh")},a._renderFile=function(t,e){var r=this,o=t.url||t,a=t.name||o.match(/[^\/]+$/)[0],l=t.value||o,u=t.type&&"image/"===t.type.substr(0,6)||null!==o.match(/\.(png|jpe?g|gif)$/i),c=$('<div class="file" />').appendTo(this._files);$('<input type="hidden" />').appendTo(c).attr({name:this.getInputName(),value:l}),u&&($('<a class="file-image" target="_blank" />').attr("href",o).appendTo(c).append($("<img />").attr({src:o,alt:a}).css({maxWidth:this.options.imageMaxWidth,maxHeight:this.options.imageMaxHeight})),c.css({minHeight:this.options.imageMaxHeight}).append(" "));var p=$('<span class="file-content" />').appendTo(c);$('<a class="file-name" target="_blank" />').attr("href",o).text(a).appendTo(p),i.create({"class":"btn-danger btn-mini",icon:"icon-trash icon-white",label:n.del,click:function(){c.slideDown(),s.deleteFile(t,r,function(t){return t?void c.show():(c.remove(),void(r.options.value&&("undefined"!=typeof e?delete r.options.value[e]:r.options.value=null)))})}}).appendTo(p),this.options.sortable&&$('<i class="icon-move file-handler" />').appendTo(p.append(" "))},s}),define("core/widgets/DateInput",["core/dcms-ajax","core/widgets/Control","core/widgets/Input"],function(t,e,n){function i(){i.super_.apply(this,arguments),this.options.type="text"}n.extend(i,{format:t.registry.get("locale.date")||"mm/dd/yy",datepicker:{}});var r=i.prototype;return e.types.date=i,e.types.datepicker=i,r.parseDate=function(t){return $.datepicker.parseDate(this.options.format,t)},r.formatDate=function(t){return $.datepicker.formatDate(this.options.format,t)},r.isVal=function(t){return this.options.value?("string"==typeof t&&(t=new Date(t)),new Date(this.options.value)==t):this.options.value==t},r.sendVal=function(){return this._elm?this._hidden.val():null},r.val=function(t){return void 0===t?i.super_.prototype.val.apply(this,arguments):("string"==typeof t&&(t=new Date(t)),!t||isNaN(t.getTime())?(this._hidden.val(""),this._elm.val("")):(this._hidden.val(t.toISOString()),this._elm.val(this.formatDate(t))),this)},r._create=function(t,e,n){return n=i.super_.prototype._create.call(this,t,e,n),this.options.datepicker&&n.datepicker(this._getDatePickerOptions(this.options)),this._hidden=$('<input type="hidden" />').appendTo(t),n},r._destroy=function(){this._hidden.remove(),this._hidden=null},r._getDatePickerOptions=function(e){return $.extend({dateFormat:e.format,isRTL:"rtl"===t.registry.get("locale.direction")},e.datepicker)},r._change=function(){var t=this.parseDate(this._elm.val());return this._hidden.val(t?t.toISOString():null),i.super_.prototype._change.apply(this,arguments)},r._renderIsSend=function(){this.isSend()?this._hidden.attr("name",this.getInputName()):this._hidden.removeAttr("name")},i}),define("core/widgets/Select2",["core/dcms-ajax","core/widgets/Control","core/widgets/MultiControl","core/nls/index"],function(t,e,n,i){function r(){r.super_.apply(this,arguments)}i=i.widgets.Select,n.extend(r,{api:null,sharedApi:6e4,quietMillis:300,emptyLabel:i.emptyLabel,result:function(t){return t.id||(t.id=t._id),t.text||(t.text=t.name||t.label),t},select2:{}});var o=r.prototype;return e.types.select2=r,r.launchSelect2=function(t,e){require(["select2"],function(){t.select2(e)})},r.destroySelect2=function(t){t.select2("destroy")},o._getSelect2Options=function(e){var n={placeholder:e.emptyLabel,allowClear:e.required===!1,multiple:e.multiple,initSelection:e.initSelection,ajax:e.ajax};if(e.api){var i=e.api;"string"==typeof i&&(i={url:i}),n.initSelection=function(n,r){var o=$.extend(!0,{data:{id:n.val()}},i);t.api(o,function(t,n){return t||!n?r(null):void r(e.result(n))})},n.ajax=$.extend({transport:function(n){return t.sharedApi(e.sharedApi,n)},data:function(t,e){return{q:t,p:e}},quietMillis:e.quietMillis,results:function(t){var n=[];return $.each(t,function(t,i){n.push("object"==typeof i?e.result(i,t):{id:t,text:i})}),{results:n}}},i)}return $.extend(n,e.select2)},o._create=function(t,e,n){return n||(n=$('<input type="hidden" />')),r.super_.prototype._create.call(this,t,e,n)},o._destroy=function(){r.destroySelect2(this._elm),r.super_.prototype._destroy.apply(this,arguments)},o._render=function(t){r.super_.prototype._render.apply(this,arguments),r.launchSelect2(this._elm,this._getSelect2Options(t))},r}),define("dcms-ajax",["core/dcms-ajax","core/plugins/layout","core/plugins/auth","core/plugins/ui","core/widgets/Tag","core/widgets/Toolbar","core/widgets/Button","core/widgets/ButtonGroup","core/widgets/Modal","core/widgets/Nav","core/widgets/Dropdown","core/widgets/NavBar","core/widgets/ProgressBar","core/widgets/Tabs","core/widgets/Tab","core/widgets/Table","core/widgets/Browser","core/widgets/Pagination","core/widgets/Container","core/widgets/Fieldset","core/widgets/Form","core/widgets/FormHorizontal","core/widgets/FormInline","core/widgets/Controls","core/widgets/ControlGroup","core/widgets/FormActions","core/widgets/Control","core/widgets/MultiControl","core/widgets/Input","core/widgets/Checkbox","core/widgets/Select","core/widgets/TextArea","core/widgets/HtmlEditor","core/widgets/Typeahead","core/widgets/Tags","core/widgets/FileUpload","core/widgets/DateInput","core/widgets/Select2"],function(t,e,n,i,r,o,s,a,l,u,c,p,d,h,f,g,m,y,v,_,b,w,x,C,T,L,k,S,A,P,O,I,E,j,N,D,F,M){return t.registry.set("plugins.layout",{}),t.registry.set("plugins.ui",{}),$.extend(t.plugins,{layout:e,auth:n,ui:i}),$.extend(t.Widget,{Tag:r,Toolbar:o,Button:s,ButtonGroup:a,Modal:l,Nav:u,Dropdown:c,NavBar:p,ProgressBar:d,Tabs:h,Tab:f,Table:g,Browser:m,Pagination:y,Container:v,Fieldset:_,Form:b,FormHorizontal:w,FormInline:x,Controls:C,ControlGroup:T,FormActions:L,Control:k,MultiControl:S,Input:A,Checkbox:P,Select:O,TextArea:I,Textarea:I,HtmlEditor:E,Typeahead:j,Tags:N,FileUpload:D,DateInput:F,Select2:M}),t});